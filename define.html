<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>介绍 | Luban使用文档</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/lubandoc/logo.jpg">
    <meta name="description" content="">
    
    <link rel="preload" href="/lubandoc/assets/css/0.styles.0f4fe269.css" as="style"><link rel="preload" href="/lubandoc/assets/js/app.9f91e436.js" as="script"><link rel="preload" href="/lubandoc/assets/js/2.e9b74d21.js" as="script"><link rel="preload" href="/lubandoc/assets/js/17.038c894b.js" as="script"><link rel="prefetch" href="/lubandoc/assets/js/10.e6749764.js"><link rel="prefetch" href="/lubandoc/assets/js/11.79991137.js"><link rel="prefetch" href="/lubandoc/assets/js/12.438a74bc.js"><link rel="prefetch" href="/lubandoc/assets/js/13.a27309f3.js"><link rel="prefetch" href="/lubandoc/assets/js/14.32dbe354.js"><link rel="prefetch" href="/lubandoc/assets/js/15.8300389b.js"><link rel="prefetch" href="/lubandoc/assets/js/16.a99f9bba.js"><link rel="prefetch" href="/lubandoc/assets/js/18.762a5722.js"><link rel="prefetch" href="/lubandoc/assets/js/19.b7ed17c8.js"><link rel="prefetch" href="/lubandoc/assets/js/20.a4d4c37a.js"><link rel="prefetch" href="/lubandoc/assets/js/21.3e671057.js"><link rel="prefetch" href="/lubandoc/assets/js/22.ce1841bd.js"><link rel="prefetch" href="/lubandoc/assets/js/23.eae0381f.js"><link rel="prefetch" href="/lubandoc/assets/js/24.444ce891.js"><link rel="prefetch" href="/lubandoc/assets/js/25.17616936.js"><link rel="prefetch" href="/lubandoc/assets/js/26.a24c15d7.js"><link rel="prefetch" href="/lubandoc/assets/js/27.41579702.js"><link rel="prefetch" href="/lubandoc/assets/js/28.6d3a828c.js"><link rel="prefetch" href="/lubandoc/assets/js/29.9641416c.js"><link rel="prefetch" href="/lubandoc/assets/js/3.a9b5ffbb.js"><link rel="prefetch" href="/lubandoc/assets/js/30.9bc5bfd5.js"><link rel="prefetch" href="/lubandoc/assets/js/31.a9f2b261.js"><link rel="prefetch" href="/lubandoc/assets/js/32.6b870fb6.js"><link rel="prefetch" href="/lubandoc/assets/js/33.ea7f93d9.js"><link rel="prefetch" href="/lubandoc/assets/js/34.7c79c6ab.js"><link rel="prefetch" href="/lubandoc/assets/js/35.458da4de.js"><link rel="prefetch" href="/lubandoc/assets/js/36.39504b55.js"><link rel="prefetch" href="/lubandoc/assets/js/37.8787b4af.js"><link rel="prefetch" href="/lubandoc/assets/js/4.89e91dfd.js"><link rel="prefetch" href="/lubandoc/assets/js/5.8ec72bbb.js"><link rel="prefetch" href="/lubandoc/assets/js/6.3f529888.js"><link rel="prefetch" href="/lubandoc/assets/js/7.b55ff290.js"><link rel="prefetch" href="/lubandoc/assets/js/8.e7717bc9.js"><link rel="prefetch" href="/lubandoc/assets/js/9.9df6d74b.js">
    <link rel="stylesheet" href="/lubandoc/assets/css/0.styles.0f4fe269.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/lubandoc/" class="home-link router-link-active"><!----> <span class="site-name">Luban使用文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/focus-creative-games/luban" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/focus-creative-games/luban" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/lubandoc/Home.html" class="sidebar-link">Home</a></li><li><a href="/lubandoc/start_up.html" class="sidebar-link">快速上手</a></li><li><a href="/lubandoc/best_practices.html" class="sidebar-link">最佳实践</a></li><li><a href="/lubandoc/feature.html" class="sidebar-link">完整特性</a></li><li><a href="/lubandoc/FAQ.html" class="sidebar-link">FAQ</a></li><li><a href="/lubandoc/command_tools.html" class="sidebar-link">luban命令行工具</a></li><li><a href="/lubandoc/editor.html" class="sidebar-link">Editor支持</a></li><li><a href="/lubandoc/define.html" aria-current="page" class="active sidebar-link">配置定义</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lubandoc/define.html#根定义文件" class="sidebar-link">根定义文件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lubandoc/define.html#topmodule" class="sidebar-link">topmodule</a></li><li class="sidebar-sub-header"><a href="/lubandoc/define.html#option" class="sidebar-link">option</a></li><li class="sidebar-sub-header"><a href="/lubandoc/define.html#patch" class="sidebar-link">patch</a></li><li class="sidebar-sub-header"><a href="/lubandoc/define.html#group" class="sidebar-link">group</a></li><li class="sidebar-sub-header"><a href="/lubandoc/define.html#import" class="sidebar-link">import</a></li><li class="sidebar-sub-header"><a href="/lubandoc/define.html#importexcel" class="sidebar-link">importexcel</a></li><li class="sidebar-sub-header"><a href="/lubandoc/define.html#externalselector" class="sidebar-link">externalselector</a></li><li class="sidebar-sub-header"><a href="/lubandoc/define.html#service" class="sidebar-link">service</a></li></ul></li><li class="sidebar-sub-header"><a href="/lubandoc/define.html#xml-子定义文件" class="sidebar-link">xml 子定义文件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lubandoc/define.html#module-定义" class="sidebar-link">module 定义</a></li><li class="sidebar-sub-header"><a href="/lubandoc/define.html#refgroup-定义" class="sidebar-link">refgroup 定义</a></li><li class="sidebar-sub-header"><a href="/lubandoc/define.html#enum-定义" class="sidebar-link">enum 定义</a></li><li class="sidebar-sub-header"><a href="/lubandoc/define.html#bean-定义" class="sidebar-link">bean 定义</a></li><li class="sidebar-sub-header"><a href="/lubandoc/define.html#table-定义" class="sidebar-link">table 定义</a></li><li class="sidebar-sub-header"><a href="/lubandoc/define.html#processor" class="sidebar-link">processor</a></li><li class="sidebar-sub-header"><a href="/lubandoc/define.html#定义标签" class="sidebar-link">定义标签</a></li><li class="sidebar-sub-header"><a href="/lubandoc/define.html#数据标签" class="sidebar-link">数据标签</a></li><li class="sidebar-sub-header"><a href="/lubandoc/define.html#分组导出-group" class="sidebar-link">分组导出 group</a></li><li class="sidebar-sub-header"><a href="/lubandoc/define.html#外部类型" class="sidebar-link">外部类型</a></li><li class="sidebar-sub-header"><a href="/lubandoc/define.html#类型" class="sidebar-link">类型</a></li></ul></li><li class="sidebar-sub-header"><a href="/lubandoc/define.html#excel-子定义文件" class="sidebar-link">excel 子定义文件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lubandoc/define.html#enum-定义文件" class="sidebar-link">enum 定义文件</a></li><li class="sidebar-sub-header"><a href="/lubandoc/define.html#bean-定义文件" class="sidebar-link">bean 定义文件</a></li><li class="sidebar-sub-header"><a href="/lubandoc/define.html#table-定义文件" class="sidebar-link">table 定义文件</a></li></ul></li></ul></li><li><a href="/lubandoc/excel.html" class="sidebar-link">excel格式介绍</a></li><li><a href="/lubandoc/excel_sep.html" class="sidebar-link">excel sep使用介绍</a></li><li><a href="/lubandoc/validator.html" class="sidebar-link">数据校验器</a></li><li><a href="/lubandoc/generate_code_data.html" class="sidebar-link">代码与数据生成</a></li><li><a href="/lubandoc/load_config_at_runtime.html" class="sidebar-link">项目中加载与使用配置</a></li><li><a href="/lubandoc/template.html" class="sidebar-link">自定义代码与数据模板</a></li><li><a href="/lubandoc/tag.html" class="sidebar-link">记录tag与过滤导出</a></li><li><a href="/lubandoc/data_json.html" class="sidebar-link">json数据源</a></li><li><a href="/lubandoc/data_xml.html" class="sidebar-link">xml数据源</a></li><li><a href="/lubandoc/data_yaml.html" class="sidebar-link">yaml数据源</a></li><li><a href="/lubandoc/l10n.html" class="sidebar-link">本地化</a></li><li><a href="/lubandoc/excel2textdiff.html" class="sidebar-link">Excel2TextDiff工具</a></li><li><a href="/lubandoc/luban_assistant.html" class="sidebar-link">LubanAssistant Excel插件</a></li><li><a href="/lubandoc/changelog.html" class="sidebar-link">更新日志</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="介绍"><a href="#介绍" class="header-anchor">#</a> 介绍</h1> <p>定义由两类文件构成</p> <ul><li>根定义文件
文件名一般为root.xml或者 __root__.xml。包括topmodule,branch,group,import,service等等设置项。</li> <li>子定义文件
包含配置表相关的定义。包括table, bean, enum定义。配置表定义既可以在xml中配置，也可以在excel文件中定义，每个项目可根据偏好自由选择，甚至可以同时存在。</li></ul> <h2 id="根定义文件"><a href="#根定义文件" class="header-anchor">#</a> 根定义文件</h2> <p>root.xml是定义的根文件，luban从root.xml直接和间接获得所有的定义相关数据。root.xml中定义了一些生成的设置参数，以及通过import和importexcel
指明了具体的配置表定义相关的定义文件。</p> <p>root.xml包含以下设置项：</p> <h3 id="topmodule"><a href="#topmodule" class="header-anchor">#</a> topmodule</h3> <p>指定了顶层命名空间。为会所有生成的代码类添加此顶层命名空间，避免生成的代码与其他其他代码产生定义冲突。</p> <p>topmodule参数可选，默认为空。不过一般推荐值为cfg。</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>topmodule</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cfg<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="option"><a href="#option" class="header-anchor">#</a> option</h3> <p>指定一些额外的自定义选项或参数。 option可以有0到多个。</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>platform<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>win<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>editor.topmodule<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>editor.cfg<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>name和value都是必选参数。</p> <p>option参数能在代码与数据scriban模板中访问。</p> <ul><li>has_option 'xxx' 检查是否存在对应选项。</li> <li>get_option 'xxx' 获得某个选项对应的value值。</li> <li>get_option_or 'option_name' 'default_value&quot; 获取某个选项的值，如果不存在，则取默认值</li></ul> <p>目前已经定义了一些内部option</p> <ul><li>editor.topmodule cs_unity_editor_json生成的代码的顶层命名空间，默认为 editor.{top_module}</li> <li>cpp_bin.output_all_types_file cpp_bin 输出的包含所有类型的文件的名称，默认gen_types.h</li> <li>cpp_bin.type_per_stub_file cpp_bin 每个stub文件包含的类型个数。默认100</li> <li>cpp_bin.stub_file_name_format cpp_bin stub文件的格式。默认 gen_stub_{0}.cpp</li> <li>cpp_ue_editor_json.type_per_stub_file cpp_ue_editor_json 每个stub文件包含的文件个数，默认200</li> <li>cpp_ue_editor_json.stub_file_name_format cpp_ue_editor_json的stub文件名格式，默认gen_stub_{0}.cpp</li></ul> <h3 id="patch"><a href="#patch" class="header-anchor">#</a> patch</h3> <p>用于本地化，制作有细微区别的多地区配置数据。可以有0个或者多个。</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>patch</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>patch</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="group"><a href="#group" class="header-anchor">#</a> group</h3> <p>实际项目中往往需要为某此table或bean中的字段指定只对服务器或客户端导出，分组机制用于解决这个问题。目前支持两种粒度的分组:表级别分组和字段级别分组。</p> <p>group用于定义一个分组，配置表定义中指定的分组必须为这些在root.xml提前定义好的分组。可以有0到多个分组，实际的游戏项目中，一般至少会定义c,s这两个分组。</p> <p>default参与用于表示 如果table未指定group，是否默认属于此分组。 default=1表示未设置group属性的table，默认属于此分组。</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>group</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>c<span class="token punctuation">&quot;</span></span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>group</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>s<span class="token punctuation">&quot;</span></span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>group</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>e<span class="token punctuation">&quot;</span></span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="import"><a href="#import" class="header-anchor">#</a> import</h3> <p>导入xml格式的子定义文件。即可以是具体的某个xml文件，也可以是目录（自动遍历该目录树，加载所有xml定义）。可以有0到多个。</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>import</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>import</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="importexcel"><a href="#importexcel" class="header-anchor">#</a> importexcel</h3> <p>导出excel格式的子定义文件。与xml定义文件不同，xml定义文件中可以同时包含enum,table,table定义，excel格式的定义文件，相应分enum,bean,table
三种类型，每种类型的文件只能定义一种结构。 每个类型的定义文件都可以有0到多个。</p> <ul><li><p>name属性指定了导入的excel定义文件名，注意，理论上为了统一，excel定义文件应该放到定义目录下，但为了照顾大多数使用者的习惯，定义文件的
查找路径为--input_data_dir 选项指定的目录。</p></li> <li><p>type属性指明了定义类别。可取 enum,bean,table。</p></li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>importexcel</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bean.xlsx<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bean<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>importexcel</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>enum.xlsx<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>enum<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>importexcel</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table.xlsx<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="externalselector"><a href="#externalselector" class="header-anchor">#</a> externalselector</h3> <p>外部类的选择器，可以有多个。选择器用于指示对于某个定义了externaltype的类，选择哪个mapper。</p> <p>例如你定义了Color类，你可以定义在selector为unity的情况下，将Color类映射为UnityEngine.Color类，方便使用。而服务器没有
指定selector参数，则仍然使用生成的Color类。</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>externalselector</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>unity<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>externalselector</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cocos<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="service"><a href="#service" class="header-anchor">#</a> service</h3> <p>service为导出目标。命令行参数中的 -s(--service)参数即指它。项目一般至少会包含client和server及all这三个导出目标。</p> <ul><li>name 表示service名。可以任意定义。</li> <li>manager表示生成的包含所有表的Tables类的名称。一般取Tables。</li> <li>group 表示导出目标中包含哪些分组。</li> <li>server.ref 用于强行引用某些类。并非所有定义的类型都会生成代码，默认只有被导出的table直接或者间接引用的类型才会生成。如果想导出一个没被table引用，但又想为它生成代码
的类型，可以在 ref里指定强行引用。例如下面示例中 xxx.ServerOnlyType1和xx.ServerOnlyEnum1一定会导出。</li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>service</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>server<span class="token punctuation">&quot;</span></span> <span class="token attr-name">manager</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Tables<span class="token punctuation">&quot;</span></span> <span class="token attr-name">group</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>s<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxx.ServerOnlyType1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxx.ServerOnlyEnum1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>service</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>service</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>client<span class="token punctuation">&quot;</span></span> <span class="token attr-name">manager</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Tables<span class="token punctuation">&quot;</span></span> <span class="token attr-name">group</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>c<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>service</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>all<span class="token punctuation">&quot;</span></span> <span class="token attr-name">manager</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Tables<span class="token punctuation">&quot;</span></span> <span class="token attr-name">group</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>c,s,e<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="xml-子定义文件"><a href="#xml-子定义文件" class="header-anchor">#</a> xml 子定义文件</h2> <p>可以包含module,bean,enum,table这些定义。</p> <p>典型的表定义如下：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enum</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxx<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enum</span><span class="token punctuation">&gt;</span></span>

   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>yyyy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Tbzzz<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxx<span class="token punctuation">&quot;</span></span> <span class="token attr-name">input</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>abc.xlsx<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="module-定义"><a href="#module-定义" class="header-anchor">#</a> module 定义</h3> <p>name属性为模块名。可以为空，也可以为多级模块名，如xx.yy。模块中可以嵌套定义子模块，子模块会继承父模块的命名空间。在模块中定义的类型，命名空间为模块全名。
如下面的Abc类，全名为 xx.yy.Abc，而Def类的命名为xx.zz.Def。</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xx<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>yy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Abc<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zz<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Def<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="refgroup-定义"><a href="#refgroup-定义" class="header-anchor">#</a> refgroup 定义</h3> <p>定义一个ref组。有时候很多字段都会引用到共同的一组表，使用refgroup比较方便，修改时不需要改多处。</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>refgroup</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxx<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xx.Tbxx,yy.Tbyy,...<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>refgroup.name 。必选。引用组名。需要全局唯一，不包含模块名。</li> <li>refgroup.ref 。必选。引用的表名。格式与 ref检验器完全相同。</li></ul> <h3 id="enum-定义"><a href="#enum-定义" class="header-anchor">#</a> enum 定义</h3> <p>定义一个枚举。格式如下</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enum</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Color<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>RED<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>红<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>GREEN<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>绿<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>BLUE<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>蓝<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>3<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enum</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enum</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>AccessMode<span class="token punctuation">&quot;</span></span> <span class="token attr-name">flags</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tags</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>key1=value1#key2=value2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">comment</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>访问方式<span class="token punctuation">&quot;</span></span> <span class="token attr-name">unique</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>READ<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tags</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>key1=value1#k2=v2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">comment</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>读<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>WRITE<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>READ_WRITE<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>READ|WRITE<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enum</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>语法介绍:</p> <ul><li>enum.name 。必选。枚举名。 命名空间为当前module的完整命名空间（包含父module)。</li> <li>enum.flags。可选。是否为bit标志位类型。默认为false。 如果为1或true,则填写配置数据时，允许使用 READ|WRITE 这种写法</li> <li>enum.tags。 可选。标签。格式为&quot;key1=value2#key2=value2#...&quot;。 一般配合自定义模板生成时才可能会用到。详细参见 <strong>定义标签</strong> 这一节。</li> <li>enum.unique。可选。枚举值是否唯一。默认为true。</li> <li>enum.comment。 可选。注释。 如果非空，生成代码时会包含注释。</li> <li>enum.var.name 必选。枚举名。</li> <li>enum.var.alias 可选。别名。 策划填写数据时，可以填别名，方便一些英语不好的策划。</li> <li>enum.var.value 可选。枚举值。如果不填，则值为上一个枚举项的值+1。 如果是第一个枚举项，则值为0.</li> <li>enum.var.tags 可选。标签。 一般配合自定义模板生成时才可能用上。 详细参见 <strong>定义标签</strong> 这一节。</li> <li>enum.var.comment 可选。注释。 如果非空，生成枚举项时会包含注释。如果为空，又定义了alias，则会取alias为注释。</li></ul> <p>策划在配置表中，可以填枚举对应的 枚举项名，别名或者相应的整数值 来表达这个枚举，<strong>强烈建议不要使用整数值</strong>。</p> <h3 id="bean-定义"><a href="#bean-定义" class="header-anchor">#</a> bean 定义</h3> <p>定义一个结构类型。结构类型又分两种，普通结构和多态结构。</p> <h4 id="普通格式"><a href="#普通格式" class="header-anchor">#</a> 普通格式</h4> <p>必须包含至少一个字段（不允许字段数为0，避免list,bean之类的数据 无限读入的情况）。格式如下：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">sep</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item_id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.TbItem<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>num<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span> <span class="token attr-name">group</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>s<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>string<span class="token punctuation">&quot;</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>unity<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>desc<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>string<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>a=1#b=2<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>bean.name 结构名。 不能包含命名空间，例如 abc.Item是不允许的。</li> <li>bean.parent 继承的父类名。 可选参数。默认为空。 可以继承其他模块的类型，此时parent必须写全名。</li> <li>bean.sep 可选参数。 指定在excel数据源中，该结构以复合模式填写，例如 MyIntVector3包含x,y,z三个int字段，通过sep=&quot;,&quot;，则所有读取MyIntVector3时，都会将读入的
字符串用','拆分为三个整数，再读入。</li> <li>var.name 字段名。 没有特别的要求，不过推荐使用xx_yy_zz这样的名称，因为生成代码时，默认会根据语言生成符合语言推荐代码风格的字段名。 有一些名字被保留不允许使用，如base,end,if之类，因为它们在一些语言里保留字或关键字，如果误用了这种名字，会有编译错误。</li> <li>var.type 类型名。参见后面的<strong>类型定义</strong>这一节。</li> <li>var.group 所属分组。可选。可以多个，以','分割，每个值必须是root.xml中定义的group中的一个，如不填，则该字段属于所有分组。 详细参见后面<strong>分组导出</strong>这一节。</li> <li>var.ref 表引用。可选。指向一个表全名或者一个<strong>refgroup</strong>。会检查此字段是否为某个表的有效id。可以避免策划填错。 详细参见 <strong>processor</strong>这一节。</li> <li>var.path 资源引用。可选。指向一个资源名。 会检查此字段是否指向有效的资源，避免策划填错而产生运行时错误。 详细参见 <strong>processor</strong>这一节。</li> <li>var.tag 字段tag。可选。格式为 tag=&quot;tag1=xxx#tag2=bb#tag3=ccc&quot;。用于为字段添加一些tag。主要用于自定义代码生成时对一些字段特殊处理。 详细参见<strong>定义标签</strong>这一节。</li></ul> <h4 id="多态结构"><a href="#多态结构" class="header-anchor">#</a> 多态结构</h4> <p>除了像普通结构那样定义自身的子字段外，也可以在定义的最后，包含1到多个子结构。类似OOP的概念，子结构会继承父结构的所有字段。子结构既可以是普通
结构，也可以是多态结构。允许任意继承层次的多态结构定义。</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Parent<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxx<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   ... 更多父类的字段
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Child11<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>x1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
       ... 更多 Child11 的字段

       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Child21<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
         ... 更多 Parent21 的字段
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Child22<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
         ... 更多 Child22 的字段
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

       ... 更多 Parent11 的直接子类
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
   
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Child12<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   ... Child12 的字段
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

在外部定义继承
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Child31<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Parent<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>a<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>float<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>b<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>float<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inner_module<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  可以从其他模块的父类继承，要求parent写全名。
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Child41<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test.Parent<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>a<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>float<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h3 id="table-定义"><a href="#table-定义" class="header-anchor">#</a> table 定义</h3> <p>定义一个表。 格式如下：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>TbTableName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>value_type<span class="token punctuation">&quot;</span></span> <span class="token attr-name">define_from_file</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>map<span class="token punctuation">&quot;</span></span> <span class="token attr-name">input</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file1,file2,...<span class="token punctuation">&quot;</span></span> <span class="token attr-name">group</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>group1,group2,...<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>name。表名。无限制。但推荐用TbXxxx的格式。</li> <li>value。 表记录的结构类型名。</li> <li>define_from_file 是否从文件中读取表记录value的定义。 可选。默认为false</li> <li>mode。 表模式。可选，默认为map。目前支持三种模式的表。
<ul><li>map。 普通key-value表;</li> <li>list。 列表形式的表。但它支持0到多个索引，并且支持多主键联合索引及多主键独立索引。</li> <li>singleton。 为单例表，适合用于定义一些全局信息。</li></ul></li> <li>input。表数据源。可以有多个，以','分割。每个数据源可以是文件，目录，xlsx中的某个单元薄，json中的某个字段，等等。</li> <li>group。 表分组。 可选。值可以多个，以','分割，每个值必须为root.xml中定义的group中的一个。 如不填，则此表属于 root.xml中定义的group中default=1的分组。</li></ul> <h4 id="table的mode详细介绍"><a href="#table的mode详细介绍" class="header-anchor">#</a> table的mode详细介绍</h4> <p>接上面table定义中关于mode的描述。 因为较关键，独立介绍。</p> <ul><li>mode=map 。普通key-value表，如果未定义mode和index，则默认为普通表，并且取value_type的第一个字段为key。</li></ul> <p>定义表</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>TbNormalMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>NormalMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>key1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">input</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>normal_map.xlsx<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>示例数据表</p> <table><thead><tr><th>##var</th> <th>key1</th> <th>x</th> <th>y</th> <th>num</th></tr></thead> <tbody><tr><td>##type</td> <td>int</td> <td>long</td> <td>string</td> <td>int</td></tr> <tr><td></td> <td>1</td> <td>1</td> <td>aaa</td> <td>123</td></tr> <tr><td></td> <td>1</td> <td>1</td> <td>bbb</td> <td>124</td></tr> <tr><td></td> <td>1</td> <td>2</td> <td>aaa</td> <td>134</td></tr> <tr><td></td> <td>2</td> <td>1</td> <td>aaa</td> <td>124</td></tr> <tr><td></td> <td>5</td> <td>6</td> <td>xxx</td> <td>898</td></tr></tbody></table> <ul><li>mode=singleton。 单例表，即只有一个记录的表，没有，也不能定义index属性。 为了方便起见，也可以写成mode=&quot;one&quot;之类。</li></ul> <p>定义表</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>TbSingleton<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Singleton<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>singleton<span class="token punctuation">&quot;</span></span> <span class="token attr-name">input</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>singleton.xlsx<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><table><thead><tr><th>##var</th> <th>guild_open_level</th> <th>bag_init_capacity</th> <th>bag_max_capacity</th> <th>newbie_tasks</th></tr></thead> <tbody><tr><td>##type</td> <td>int</td> <td>int</td> <td>int</td> <td>list,int</td></tr> <tr><td>##</td> <td>desc1</td> <td>desc 2</td> <td>desc 3</td> <td>desc 4</td></tr> <tr><td></td> <td>10</td> <td>100</td> <td>500</td> <td>10001,10002</td></tr></tbody></table> <ul><li>mode=list，key个数为0。 无主键列表模式。</li></ul> <p>定义表</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>TbNotKeyList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>NotKeyList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">input</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>not_key_list.xlsx<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>示例数据表</p> <table><thead><tr><th>##var</th> <th>x</th> <th>y</th> <th>z</th> <th>num</th></tr></thead> <tbody><tr><td>##type</td> <td>int</td> <td>long</td> <td>string</td> <td>int</td></tr> <tr><td></td> <td>1</td> <td>1</td> <td>aaa</td> <td>123</td></tr> <tr><td></td> <td>1</td> <td>1</td> <td>bbb</td> <td>124</td></tr> <tr><td></td> <td>1</td> <td>2</td> <td>aaa</td> <td>134</td></tr> <tr><td></td> <td>2</td> <td>1</td> <td>aaa</td> <td>124</td></tr> <tr><td></td> <td>5</td> <td>6</td> <td>xxx</td> <td>898</td></tr></tbody></table> <ul><li>mode=list, 联合多主键模式。 key个数 &gt;= 2。
多个key构成联合唯一主键。使用&quot;+&quot;分割key，表示联合关系。</li></ul> <p>定义表</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>TbUnionMultiKey<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UnionMultiKey<span class="token punctuation">&quot;</span></span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>key1+key2+key3<span class="token punctuation">&quot;</span></span> <span class="token attr-name">input</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>union_multi_key.xlsx<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>示例数据表</p> <table><thead><tr><th>##var</th> <th>key1</th> <th>key2</th> <th>key3</th> <th>num</th></tr></thead> <tbody><tr><td>##type</td> <td>int</td> <td>long</td> <td>string</td> <td>int</td></tr> <tr><td></td> <td>1</td> <td>1</td> <td>aaa</td> <td>123</td></tr> <tr><td></td> <td>1</td> <td>1</td> <td>bbb</td> <td>124</td></tr> <tr><td></td> <td>1</td> <td>2</td> <td>aaa</td> <td>134</td></tr> <tr><td></td> <td>2</td> <td>1</td> <td>aaa</td> <td>124</td></tr> <tr><td></td> <td>5</td> <td>6</td> <td>xxx</td> <td>898</td></tr></tbody></table> <ul><li>mode=&quot;list&quot;, 独立多主键模式。key个数&gt;=1， 使用&quot;,&quot;分割key，表示独立主键模式，即每个key都是独立唯一索引。</li></ul> <p>定义表</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>TbMultiKey<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>MultiKey<span class="token punctuation">&quot;</span></span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>key1,key2,key3<span class="token punctuation">&quot;</span></span> <span class="token attr-name">input</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>multi_key.xlsx<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>示例数据表</p> <table><thead><tr><th>##var</th> <th>key1</th> <th>key2</th> <th>key3</th> <th>num</th></tr></thead> <tbody><tr><td>##type</td> <td>int</td> <td>long</td> <td>string</td> <td>int</td></tr> <tr><td></td> <td>1</td> <td>2</td> <td>aaa</td> <td>123</td></tr> <tr><td></td> <td>2</td> <td>4</td> <td>bbb</td> <td>124</td></tr> <tr><td></td> <td>3</td> <td>6</td> <td>ccc</td> <td>134</td></tr> <tr><td></td> <td>4</td> <td>8</td> <td>ddd</td> <td>124</td></tr> <tr><td></td> <td>5</td> <td>1</td> <td>eee</td> <td>898</td></tr></tbody></table> <h4 id="table-input-数据源详细介绍"><a href="#table-input-数据源详细介绍" class="header-anchor">#</a> table.input 数据源详细介绍</h4> <p>table的input属性指定了数据源，允许多个，以&quot;,&quot;分割。支持非常灵活的数据源定义：</p> <ul><li>来自某个excel文件的所有单元薄。例如 xxx.xlsx</li> <li>来自某个excel文件的指定单元薄。例如 sheet@xxx.xlsx</li> <li>来自json、xml、lua、yaml、unity scriptable asset文件。例如 xx.json或xx.xml或xx.lua或xx.yml</li> <li>来自json、xml、lua、yaml、unity scriptable asset子字段。 例如 *items@item_module.json或item.consts@item_module.json之类，其他格式同理</li> <li>来自目录。目录树下所有文件（包含递归子目录）都会被当作数据源读入，每个文件(excel族例外)对应一个记录。例如 skill_json_dir</li> <li>以上的随意组合。如  xx.xlsx,sheet2@yy.xls,abc@zz.json,ccc_dir</li></ul> <h3 id="processor"><a href="#processor" class="header-anchor">#</a> processor</h3> <p>对于类型，可以附加processor元数据。processor有两个用途：</p> <ul><li>校验器。如 ref,path,range,set,size。</li> <li>特殊的注解。如sep 等等。</li> <li>tag定义。 除了以上两种以外的名字，都会被当作tag处理。</li></ul> <h4 id="校验器"><a href="#校验器" class="header-anchor">#</a> 校验器</h4> <p>格式为 processor1=value1#processor2=value2 ...</p> <p>目前支持的检验器有ref,path,range,set,size，详细请参见文档 <a href="validator">数据校验器</a>。</p> <h4 id="特殊注解"><a href="#特殊注解" class="header-anchor">#</a> 特殊注解</h4> <p>用于指示luban的对数据作特殊处理。目前支持有注解器有</p> <ul><li>sep 分割器,格式为 sep=字符列表 。只能用于加载excel数据。指示将读入的下一个单元格（或者下一个字符串），用sep中的任意一个字符分割成多个子数据，再将这些子数据作为一个当前类型的数据读入。 一般来说，只有容器类型和bean类型及text这种带有多个原子数据的类型才可能用得到sep。</li></ul> <h3 id="定义标签"><a href="#定义标签" class="header-anchor">#</a> 定义标签</h3> <p>定义的所有processor=value数据对，都会被维护成 k-v tags字典。 tag目前主要用于自定义代码或者数据的模板生成，当想对某些字段作特殊处理时，tag可以发挥作用。</p> <p>scriban模板文件中提供了两个函数可以操作tag。</p> <div><ul><li>{{has_tag ctype 'tag_name'}}  。 检查类型是否有某个tag</li> <li>{{get_tag ctype 'tag_name'}} 。 返回类型的tag对应的值，如不存在则返回空。</li></ul></div><h3 id="数据标签"><a href="#数据标签" class="header-anchor">#</a> 数据标签</h3> <p>注意与定义标签不同。定义作用于结构，字段，表等等定义上，数据标签作用于记录。详细文档见 <a href="tag"><strong>tag</strong></a></p> <p>目前数据标签有几个用途：</p> <ul><li>记录过滤</li></ul> <p>为记录添加tag,可用于过滤导出之类的场合。比如，对于标识了dev或者debug的数据，正式发布时，可以用 --output:exclude_tags dev,test 过滤掉这些数据。</p> <ul><li>unchecked 标记</li></ul> <p>标识不对该记录执行校验器。研发中有时候策划批量做了一批临时数据，很多引用都不合法，程序暂时也用不到，导致生成时有大量警告，通过给数据添加unchecked的方式，
可以让检验器不检查这些记录的数据合法性。</p> <h3 id="分组导出-group"><a href="#分组导出-group" class="header-anchor">#</a> 分组导出 group</h3> <p>目前支持两种粒度的分组导出：table级别和bean字段级别。table定义和 bean的field定义都支持group属性。</p> <ul><li>table 级别导出
table的group属性如果不指定，则默认对所有group.default=1的分组导出，如果指定，则只对指定分组导出。可以有多个分组。</li></ul> <p>xml格式定义如下</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>TbClothDisplay<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ClothDisplay<span class="token punctuation">&quot;</span></span> <span class="token attr-name">group</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>c<span class="token punctuation">&quot;</span></span> <span class="token attr-name">input</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test/cloth.xlsx<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> 此表只属于c分组
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>TbItem<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">group</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>c,s<span class="token punctuation">&quot;</span></span> <span class="token attr-name">input</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test/item.xlsx<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> 此表属于c,s分组
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>TbWidget<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Window<span class="token punctuation">&quot;</span></span> <span class="token attr-name">group</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>e<span class="token punctuation">&quot;</span></span> <span class="token attr-name">input</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test/widget.xlsx<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> 此表只属于e分组
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>xlsx格式定义如下</p> <table><thead><tr><th>##var</th> <th>full_name</th> <th>value_type</th> <th>input</th> <th>group</th> <th>...</th></tr></thead> <tbody><tr><td></td> <td>TbClothDisplay</td> <td>ClothDisplay</td> <td>cloth/cloth.xlsx</td> <td>c</td> <td></td></tr> <tr><td></td> <td>TbItem</td> <td>Item</td> <td>item/item.xlsx</td> <td>c,s</td> <td></td></tr> <tr><td></td> <td>TbWidget</td> <td>Widget</td> <td>ui/widget.xlsx</td> <td>e</td> <td></td></tr></tbody></table> <p>Luban.Client使用 -s client 参数时，只导出TbDemoGroup_C和TbDemoGroup_CS表，而TbDemoGroup_E表不会导出。</p> <ul><li>bean的field级别导出</li></ul> <p>导出配置时，bean中某个field根据分组导出。</p> <p>xml定义格式如下：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>DemoGroup<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>x1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> 默认属于所有分组c,s,e
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>x2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span> <span class="token attr-name">group</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>c<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>属于 c 分组
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>x3<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span> <span class="token attr-name">group</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>s<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>属于s分组
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>x4<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span> <span class="token attr-name">group</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>c,s<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>属于c,s分组
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>如果在 __bean__.xlsx 中定义bean，格式如下</p> <table><thead><tr><th>##var</th> <th>full_name</th> <th>sep</th> <th>comment</th> <th>field.name</th> <th>fields.type</th> <th>field.group</th> <th>...</th></tr></thead> <tbody><tr><td></td> <td>DemoGroup</td> <td></td> <td></td> <td>id</td> <td>int</td> <td></td> <td></td></tr> <tr><td></td> <td></td> <td></td> <td></td> <td>x1</td> <td>int</td> <td></td> <td></td></tr> <tr><td></td> <td></td> <td></td> <td></td> <td>x2</td> <td>int</td> <td>c</td> <td></td></tr> <tr><td></td> <td></td> <td></td> <td></td> <td>x3</td> <td>int</td> <td>s</td> <td></td></tr> <tr><td></td> <td></td> <td></td> <td></td> <td>x4</td> <td>int</td> <td>c,s</td> <td></td></tr></tbody></table> <p>如果直接在数据表里定义的bean结构，格式如下</p> <table><thead><tr><th>##var</th> <th>id</th> <th>x1</th> <th>x2</th> <th>x3</th> <th>x4</th></tr></thead> <tbody><tr><td>##type</td> <td>int</td> <td>int</td> <td>int&amp;group=c</td> <td>int&amp;group=s</td> <td>int&amp;group=c,s</td></tr> <tr><td></td> <td>1</td> <td>2</td> <td>2</td> <td>2</td> <td>2</td></tr></tbody></table> <p>当 -s client 时， id、x1、x2、x4字段导出。
当 -s server 时， id、x1、x3、x4字段导出。</p> <h3 id="外部类型"><a href="#外部类型" class="header-anchor">#</a> 外部类型</h3> <p>enum和bean类型都支持支持外部类型，可以将某个自定义类型，映射到现成的一个类。目前只支持c#语言的外部类型，其他语言需要时再扩展。</p> <p>如你可以定义一个AudioType，映射到UnityEngine.AudioType。</p> <p>如你可以定义一个Color类，映射到UnityEngine.Color类。</p> <p>定义如下</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>
外部枚举定义

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enum</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>AudioType<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UNKNOWN<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ACC<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>AIFF<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enum</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>externaltype</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>unity_audio_type<span class="token punctuation">&quot;</span></span> <span class="token attr-name">origin_type_name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test.AudioType<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">lan</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cs<span class="token punctuation">&quot;</span></span> <span class="token attr-name">selector</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>unity_cs<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target_type_name</span><span class="token punctuation">&gt;</span></span>UnityEngine.AudioType<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target_type_name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>externaltype</span><span class="token punctuation">&gt;</span></span>

外部class定义

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Color<span class="token punctuation">&quot;</span></span> <span class="token attr-name">sep</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>r<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>float<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>g<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>float<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>b<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>float<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>a<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>float<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>externaltype</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>unity_color<span class="token punctuation">&quot;</span></span> <span class="token attr-name">origin_type_name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test.Color<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">lan</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cs<span class="token punctuation">&quot;</span></span> <span class="token attr-name">selector</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>unity_cs<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target_type_name</span><span class="token punctuation">&gt;</span></span>UnityEngine.Color<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target_type_name</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>create_external_object_function</span><span class="token punctuation">&gt;</span></span>ExternalTypeUtil.NewFromCfgColor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>create_external_object_function</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>externaltype</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>语法介绍：</p> <ul><li>externaltype.name。必选。外部类型名。这个类型名并不是真实的名字，类似id的概念。需要所有定义文件内唯一。它不会自动加上模块名。</li> <li>externaltype.origin_type_name。 必选。被映射的类型<strong>全名</strong>。</li> <li>externaltype.mapper 映射器。 由于对于一个类，有些语言需要映射，有些语言可能不需要映射，另外，每个语言的映射参数都不一样。所以可能会有多个。</li> <li>mapper.lan 。必选。只对该语言生效。需要与selector配合形成唯一mapper。</li> <li>mapper.selector。 必选。 只对该selector生成。需要与lan配合形成唯一mapper。</li> <li>mapper.target_type_name 必选。映射的外部类型全名。</li> <li>mapper.create_external_object_function 映射外部enum时可选，外部class时必选。转换函数名。需要提供一个函数，用来将配置类对象转换到外部类对象。</li></ul> <p>使用示例，可参见示例项目 <a href="https://github.com/focus-creative-games/luban_examples/tree/main/Projects/Csharp_Unity_bin_ExternalTypes" target="_blank" rel="noopener noreferrer">Csharp_Unity_bin_ExternalTypes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="类型"><a href="#类型" class="header-anchor">#</a> 类型</h3> <p>luban有非常完备的类型系统，可以轻松表达任意复杂的数据结构。</p> <h4 id="原生类型"><a href="#原生类型" class="header-anchor">#</a> 原生类型</h4> <ul><li>bool</li> <li>byte(int8)</li> <li>short(int16)</li> <li>fshort</li> <li>int(int32)</li> <li>fint</li> <li>long(int64)</li> <li>flong</li> <li>float(float32)</li> <li>double(float64)</li> <li>string</li></ul> <h4 id="bytes-类型"><a href="#bytes-类型" class="header-anchor">#</a> bytes 类型</h4> <p>即字节数组类型。在c#中对应byte[]</p> <h4 id="vector2-vector2-vector3"><a href="#vector2-vector2-vector3" class="header-anchor">#</a> vector2,vector2,vector3</h4> <p>内置的向量类型。 在c#语言中对应System.Numerics.Vector{2,3,4}，或 UnityEngine.Vector{2,3,4}。</p> <ul><li>vector2 。 float x, y;</li> <li>vector3 。 float x, y, z;</li> <li>vector4 。 float x, y, z, w;</li></ul> <h4 id="datetime-time-类型"><a href="#datetime-time-类型" class="header-anchor">#</a> datetime (time) 类型</h4> <p>时间类型。导出数据后，会转换为int类型1970-1-1 0:0:0 以来的UTC时间秒数。</p> <p>由于策划填的都是 墙上时间（时期跟时区相关），所以导出时需要指定 datetime所对应的时区，不指定则默认使用东8区时区。
参见 <a href="https://github.com/focus-creative-games/luban/wiki/Luan.Client%E3%80%81Luban.Server%E5%8F%8ALuban.ClientServer%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%BB%8B%E7%BB%8D" target="_blank" rel="noopener noreferrer">Luban 命令行<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 中关于时区相关的参数介绍。</p> <h4 id="text"><a href="#text" class="header-anchor">#</a> text</h4> <p>本地化文本类型。它由key和text两个值构成。</p> <h4 id="容器类型"><a href="#容器类型" class="header-anchor">#</a> 容器类型</h4> <ul><li>array  。数组类型，定义方式为 &quot;array,element_type&quot;。 对应c#类型为 element_type[]之类。 例如 array,int;array,Task。</li> <li>list。 列表类型。定义方式为 &quot;list,element_type&quot;。对应c#类型为List&lt;element_type&gt;。例如 list,int;list,Item。</li> <li>set。 集合类型。 定义方式为 &quot;set,element_type&quot;。 对应c#类型为 HashSet&lt;element_type&gt;。例如 set,int;set,string。</li> <li>map。 字典类型。 定义方式为 &quot;map,key_type,value_type&quot;。对应c#类型为 Dictionary&lt;key_type, value_type&gt;。例如 map,int,int;map,string,Item;</li></ul> <p>array和list的element_type可以为除了容器类型以外的任意类型，不支持容器类型的嵌套，但你可以通过定义一个bean，包含容器字段。然后再定义list,bean的方式
间接实现容器嵌套。</p> <p>set的element_type必须是原生类型，datetime, 枚举类型，不能是bean类型。</p> <p>map的key类型的约束与set的element_type相关， value类型约束与 array的element_type相同。</p> <h4 id="可空类型"><a href="#可空类型" class="header-anchor">#</a> 可空类型</h4> <p>对应c#里的可空变量的语义，如int?, bool? ColorType? 。 除了容器以外的类型都可以定义相应的可空类型。</p> <h4 id="enum-类型"><a href="#enum-类型" class="header-anchor">#</a> enum 类型</h4> <p>枚举类型。</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enum</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Color<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>RED<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>红<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>GREEN<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>绿<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>BLUE<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>蓝<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>3<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enum</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="bean-类型"><a href="#bean-类型" class="header-anchor">#</a> bean 类型</h4> <p>结构定义。bean包含两种，普通bean结构和多态bean结构。</p> <ul><li>普通bean结构</li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value_type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>道具<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.TbItem<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tags</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>k1=v1#k2=v2<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>string<span class="token punctuation">&quot;</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>unity<span class="token punctuation">&quot;</span></span> <span class="token attr-name">comment</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>图标<span class="token punctuation">&quot;</span></span> <span class="token attr-name">group</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>c<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>num<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span> <span class="token attr-name">group</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>c,s<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>多态 bean 结构</li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Shape<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>command_var1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Shape2D<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>command_2d_var<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>string<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Circle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>radius<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>float<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Rectangle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>float<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>height<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>float<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Line<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>start_pos<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>vector2<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>direction<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>vector2<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

或者在外面定义继承

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Triangle<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Shape<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>a<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>float<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>b<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>float<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>c<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>float<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h2 id="excel-子定义文件"><a href="#excel-子定义文件" class="header-anchor">#</a> excel 子定义文件</h2> <p>excel子定义文件与xml定义文件几乎完全等价，对于luban来说，只是从哪种格式的文件中解析读取定义的区别。</p> <p>请参见 <a href="https://github.com/focus-creative-games/luban_examples" target="_blank" rel="noopener noreferrer">luban_examples<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>/DesignerConfigs目录下的 __enums__.xlsx, __beans__.xlsx, __tables__.xlsx。</p> <p>excel子定义文件与xml子定义文件几乎完全等价（除了不能定义外部类的映射信息即externaltype），对luban而言它们的区别仅仅是定义的格式不同，但提供的元数据是等价的。</p> <p>===这儿仅介绍excel定义文件的格式，<strong>具体语义请参照xml子定义文件中相关文档</strong>。==</p> <p>xml子定义文件可以定义任意结构，但excel不适合在一个文件里定义各种不同结构，因此excel子定义文件分类型，每个类型只定义一种结构。每个类型可以有0到多个定义文件（多个importexcel语句，而不是name里包含多个文件）。</p> <p>由于大多数使用excel文件来定义配置的使用者，为了方便起见，希望定义excel文件在配置数据目录下，而不是跟其他定义一样，在配置定义目录下，特地作了特殊处理，以%input_data_dir%为相对目录读入excel定义文件。</p> <p>有三种类型的定义文件:</p> <ul><li>enum</li> <li>bean</li> <li>table</li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>importexcel</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>__enums__.xlsx<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>enum<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>importexcel</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>__beans__.xlsx<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bean<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>importexcel</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>__tables__.xlsx<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="enum-定义文件"><a href="#enum-定义文件" class="header-anchor">#</a> enum 定义文件</h3> <p>定义多个enum结构。</p> <p>格式如下</p> <table border="1"><tr align="center"><td>##var</td><td>full_name</td><td>flags</td><td>unique</td><td>comment</td><td>tags</td><td colspan="5">*items</td></tr> <tr align="center"><td>##+</td><td></td><td></td><td></td><td></td><td></td><td>name</td><td>alias</td><td>value</td><td>comment</td><td>tags</td></tr> <tr align="center"><td></td><td>test.ETestQuality</td><td>false</td><td>true</td><td></td><td></td><td>A</td><td>白</td><td>1</td><td>最差品质</td><td></td></tr> <tr align="center"><td></td><td></td><td></td><td></td><td></td><td></td><td>B</td><td>黑</td><td>1</td><td>最差品质</td><td></td></tr> <tr align="center"><td></td><td></td><td></td><td></td><td></td><td></td><td>C</td><td>蓝</td><td>1</td><td>中等品质</td><td></td></tr> <tr align="center"><td></td><td></td><td></td><td></td><td></td><td></td><td>D</td><td>红</td><td>1</td><td>最好品质</td><td></td></tr> <tr align="center"><td></td><td>test.AccessFlag</td><td>true</td><td>true</td><td></td><td></td><td>WRITE</td><td></td><td>1</td><td></td><td></td></tr> <tr align="center"><td></td><td></td><td></td><td></td><td></td><td></td><td>READ</td><td></td><td>2</td><td></td><td></td></tr> <tr align="center"><td></td><td></td><td></td><td></td><td></td><td></td><td>TRUNCATE</td><td></td><td>4</td><td></td><td></td></tr> <tr align="center"><td></td><td></td><td></td><td></td><td></td><td></td><td>NEW</td><td></td><td>8</td><td></td><td></td></tr> <tr align="center"><td></td><td></td><td></td><td></td><td></td><td></td><td>READ_WRITE</td><td></td><td>READ|WRITE</td><td></td><td></td></tr></table> <h3 id="bean-定义文件"><a href="#bean-定义文件" class="header-anchor">#</a> bean 定义文件</h3> <p>定义多个bean结构。 不支持<strong>多态bean</strong>定义。</p> <p>格式如下</p> <table border="1"><tr align="center"><td>##var</td><td>full_name</td><td>sep</td><td>comment</td><td>tags</td><td colspan="5">*fields</td></tr> <tr align="center"><td>##+</td><td></td><td></td><td></td><td></td><td>name</td><td>type</td><td>group</td><td>comment</td><td>tags</td></tr> <tr align="center"><td></td><td>test.DemoBean1</td><td></td><td></td><td></td><td>x1</td><td>int</td><td></td><td></td><td></td></tr> <tr align="center"><td></td><td></td><td></td><td></td><td></td><td>x2</td><td>string</td><td></td><td></td><td></td></tr> <tr align="center"><td></td><td></td><td></td><td></td><td></td><td>x3</td><td>float</td><td></td><td></td><td></td></tr> <tr align="center"><td></td><td></td><td></td><td></td><td></td><td>x4</td><td>bool</td><td></td><td></td><td></td></tr> <tr align="center"><td></td><td>test.DemoBean2</td><td></td><td></td><td></td><td>x1</td><td>int</td><td></td><td></td><td></td></tr> <tr align="center"><td></td><td></td><td></td><td></td><td></td><td>x3</td><td>list,float</td><td></td><td></td><td></td></tr> <tr align="center"><td></td><td></td><td></td><td></td><td></td><td>x4</td><td>test.DemoBean1</td><td></td><td></td><td></td></tr></table> <h3 id="table-定义文件"><a href="#table-定义文件" class="header-anchor">#</a> table 定义文件</h3> <p>定义配置表列表，只有出现在此表中的表才会导出。</p> <p>value_type为表记录类型类,必须是bean结构。value_type的类型名中如果不包含模块名，则取与full_name相同的命名空间，如果包含模块名，则取此模块名。例如，Item的模块名为 item，demo.Bag的模块名为demo。</p> <p>格式如下</p> <table><thead><tr><th>##var</th> <th>full_name</th> <th>value_type</th> <th>define_from_file</th> <th>input</th> <th>index</th> <th>mode</th> <th>group</th> <th>comment</th> <th>tags</th> <th>patch_input</th> <th>output</th></tr></thead> <tbody><tr><td></td> <td>item.TbItem</td> <td>Item</td> <td>true</td> <td>item.xlsx</td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td></td> <td>test.TbBag</td> <td>demo.Bag</td> <td>true</td> <td>bag.xlsx</td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td></tr></tbody></table></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2/12/2022, 12:51:22 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/lubandoc/editor.html" class="prev">
        Editor支持
      </a></span> <span class="next"><a href="/lubandoc/excel.html">
        excel格式介绍
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/lubandoc/assets/js/app.9f91e436.js" defer></script><script src="/lubandoc/assets/js/2.e9b74d21.js" defer></script><script src="/lubandoc/assets/js/17.038c894b.js" defer></script>
  </body>
</html>
