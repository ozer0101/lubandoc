<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>代码与数据生成 | Luban使用文档</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/lubandoc/logo.jpg">
    <meta name="description" content="">
    
    <link rel="preload" href="/lubandoc/assets/css/0.styles.8c5bd95f.css" as="style"><link rel="preload" href="/lubandoc/assets/js/app.699fa6f6.js" as="script"><link rel="preload" href="/lubandoc/assets/js/2.e9b74d21.js" as="script"><link rel="preload" href="/lubandoc/assets/js/24.32d98dd4.js" as="script"><link rel="prefetch" href="/lubandoc/assets/js/10.9ce30ac5.js"><link rel="prefetch" href="/lubandoc/assets/js/11.c709e3a4.js"><link rel="prefetch" href="/lubandoc/assets/js/12.040fc1fd.js"><link rel="prefetch" href="/lubandoc/assets/js/13.03db4c13.js"><link rel="prefetch" href="/lubandoc/assets/js/14.06ab5f5a.js"><link rel="prefetch" href="/lubandoc/assets/js/15.e44dfa47.js"><link rel="prefetch" href="/lubandoc/assets/js/16.ebd03eb5.js"><link rel="prefetch" href="/lubandoc/assets/js/17.6f3e2b42.js"><link rel="prefetch" href="/lubandoc/assets/js/18.88be012a.js"><link rel="prefetch" href="/lubandoc/assets/js/19.2f07a146.js"><link rel="prefetch" href="/lubandoc/assets/js/20.0e732435.js"><link rel="prefetch" href="/lubandoc/assets/js/21.f4e1ae0f.js"><link rel="prefetch" href="/lubandoc/assets/js/22.7e28b0bd.js"><link rel="prefetch" href="/lubandoc/assets/js/23.ddd605c2.js"><link rel="prefetch" href="/lubandoc/assets/js/25.217e48a7.js"><link rel="prefetch" href="/lubandoc/assets/js/26.baa29b3f.js"><link rel="prefetch" href="/lubandoc/assets/js/27.d19b9240.js"><link rel="prefetch" href="/lubandoc/assets/js/28.e4eee018.js"><link rel="prefetch" href="/lubandoc/assets/js/29.45893c34.js"><link rel="prefetch" href="/lubandoc/assets/js/3.a9b5ffbb.js"><link rel="prefetch" href="/lubandoc/assets/js/30.9bcd776c.js"><link rel="prefetch" href="/lubandoc/assets/js/31.003dd5f7.js"><link rel="prefetch" href="/lubandoc/assets/js/32.d7d0fc23.js"><link rel="prefetch" href="/lubandoc/assets/js/33.65918ca3.js"><link rel="prefetch" href="/lubandoc/assets/js/34.247ed521.js"><link rel="prefetch" href="/lubandoc/assets/js/35.f5ecaf36.js"><link rel="prefetch" href="/lubandoc/assets/js/36.16cc10fd.js"><link rel="prefetch" href="/lubandoc/assets/js/37.6e4cdb3f.js"><link rel="prefetch" href="/lubandoc/assets/js/4.afc2c684.js"><link rel="prefetch" href="/lubandoc/assets/js/5.e7d128b2.js"><link rel="prefetch" href="/lubandoc/assets/js/6.3f529888.js"><link rel="prefetch" href="/lubandoc/assets/js/7.d0b408c9.js"><link rel="prefetch" href="/lubandoc/assets/js/8.2f7c0856.js"><link rel="prefetch" href="/lubandoc/assets/js/9.4e6e1cec.js">
    <link rel="stylesheet" href="/lubandoc/assets/css/0.styles.8c5bd95f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/lubandoc/" class="home-link router-link-active"><!----> <span class="site-name">Luban使用文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/focus-creative-games/luban" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/focus-creative-games/luban" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/lubandoc/Home.html" class="sidebar-link">Home</a></li><li><a href="/lubandoc/start_up.html" class="sidebar-link">快速上手</a></li><li><a href="/lubandoc/best_practices.html" class="sidebar-link">最佳实践</a></li><li><a href="/lubandoc/feature.html" class="sidebar-link">完整特性</a></li><li><a href="/lubandoc/FAQ.html" class="sidebar-link">FAQ</a></li><li><a href="/lubandoc/command_tools.html" class="sidebar-link">luban命令行工具</a></li><li><a href="/lubandoc/editor.html" class="sidebar-link">Editor支持</a></li><li><a href="/lubandoc/define.html" class="sidebar-link">配置定义</a></li><li><a href="/lubandoc/excel.html" class="sidebar-link">excel格式介绍</a></li><li><a href="/lubandoc/excel_sep.html" class="sidebar-link">excel sep使用介绍</a></li><li><a href="/lubandoc/validator.html" class="sidebar-link">数据校验器</a></li><li><a href="/lubandoc/generate_code_data.html" aria-current="page" class="active sidebar-link">代码与数据生成</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lubandoc/generate_code_data.html#支持的平台、引擎和语言" class="sidebar-link">支持的平台、引擎和语言</a></li><li class="sidebar-sub-header"><a href="/lubandoc/generate_code_data.html#可以导出哪些数据格式" class="sidebar-link">可以导出哪些数据格式</a></li><li class="sidebar-sub-header"><a href="/lubandoc/generate_code_data.html#luban命令行工具的详细文档" class="sidebar-link">luban命令行工具的详细文档？</a></li><li class="sidebar-sub-header"><a href="/lubandoc/generate_code_data.html#如何生成代码和数据" class="sidebar-link">如何生成代码和数据</a></li><li class="sidebar-sub-header"><a href="/lubandoc/generate_code_data.html#为unity项目生成c-代码并导出json数据" class="sidebar-link">为unity项目生成c#代码并导出json数据</a></li><li class="sidebar-sub-header"><a href="/lubandoc/generate_code_data.html#为-unity-puerts-项目生成-ts代码-并生成json数据" class="sidebar-link">为 unity + puerts 项目生成 ts代码，并生成json数据</a></li><li class="sidebar-sub-header"><a href="/lubandoc/generate_code_data.html#为-ue4项目-生成c-代码-非蓝图-和binary数据" class="sidebar-link">为 UE4项目，生成c++代码（非蓝图）和binary数据</a></li><li class="sidebar-sub-header"><a href="/lubandoc/generate_code_data.html#为ue4项目-生成c-代码-蓝图-和binary数据" class="sidebar-link">为UE4项目，生成c++代码（蓝图）和binary数据</a></li><li class="sidebar-sub-header"><a href="/lubandoc/generate_code_data.html#为ue4项目-生成c-代码-蓝图-和json数据" class="sidebar-link">为UE4项目，生成c++代码（蓝图）和json数据</a></li><li class="sidebar-sub-header"><a href="/lubandoc/generate_code_data.html#其他类型项目类型-如何生成代码和数据" class="sidebar-link">其他类型项目类型，如何生成代码和数据</a></li><li class="sidebar-sub-header"><a href="/lubandoc/generate_code_data.html#生成protobuf的定义文件及protobuf数据格式" class="sidebar-link">生成protobuf的定义文件及protobuf数据格式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lubandoc/generate_code_data.html#protobuf2" class="sidebar-link">protobuf2</a></li><li class="sidebar-sub-header"><a href="/lubandoc/generate_code_data.html#protobuf3" class="sidebar-link">protobuf3</a></li></ul></li><li class="sidebar-sub-header"><a href="/lubandoc/generate_code_data.html#生成msgpack的数据" class="sidebar-link">生成msgpack的数据</a></li><li class="sidebar-sub-header"><a href="/lubandoc/generate_code_data.html#生成flatbuffers的定义文件及flatbuffers数据格式" class="sidebar-link">生成flatbuffers的定义文件及flatbuffers数据格式</a></li><li class="sidebar-sub-header"><a href="/lubandoc/generate_code_data.html#只生成代码或者数据吗" class="sidebar-link">只生成代码或者数据吗</a></li><li class="sidebar-sub-header"><a href="/lubandoc/generate_code_data.html#配置中有些string字段是资源地址-统一导出这些资源地址" class="sidebar-link">配置中有些string字段是资源地址，统一导出这些资源地址</a></li><li class="sidebar-sub-header"><a href="/lubandoc/generate_code_data.html#生成的c-代码中-vector的类型由system-numerics-vector-2-3-4-改成-unityengine-vector-2-3-4" class="sidebar-link">生成的c#代码中,vector的类型由System.Numerics.Vector{2,3,4}，改成 UnityEngine.Vector{2,3,4}</a></li><li class="sidebar-sub-header"><a href="/lubandoc/generate_code_data.html#自定义代码命名风格" class="sidebar-link">自定义代码命名风格</a></li><li class="sidebar-sub-header"><a href="/lubandoc/generate_code_data.html#gen-types中-code-cs-json和code-cs-unity-json-有什么区别" class="sidebar-link">gentypes中 codecsjson和codecsunityjson 有什么区别</a></li><li class="sidebar-sub-header"><a href="/lubandoc/generate_code_data.html#命令行参数中的-j-cfg-的含义" class="sidebar-link">命令行参数中的 -j cfg 的含义</a></li><li class="sidebar-sub-header"><a href="/lubandoc/generate_code_data.html#生成的配置代码顶层命名空间是cfg-可以不加这个命名空间或者使用其他值吗" class="sidebar-link">生成的配置代码顶层命名空间是cfg，可以不加这个命名空间或者使用其他值吗？</a></li><li class="sidebar-sub-header"><a href="/lubandoc/generate_code_data.html#生成的数据文件的后缀" class="sidebar-link">生成的数据文件的后缀</a></li><li class="sidebar-sub-header"><a href="/lubandoc/generate_code_data.html#enum、bean-类型代码导出规则" class="sidebar-link">enum、bean 类型代码导出规则</a></li><li class="sidebar-sub-header"><a href="/lubandoc/generate_code_data.html#不同导出格式-性能测试结果" class="sidebar-link">不同导出格式 性能测试结果</a></li><li class="sidebar-sub-header"><a href="/lubandoc/generate_code_data.html#binary与json格式加载性能对比" class="sidebar-link">binary与json格式加载性能对比？</a></li></ul></li><li><a href="/lubandoc/load_config_at_runtime.html" class="sidebar-link">项目中加载与使用配置</a></li><li><a href="/lubandoc/template.html" class="sidebar-link">自定义代码与数据模板</a></li><li><a href="/lubandoc/tag.html" class="sidebar-link">记录tag与过滤导出</a></li><li><a href="/lubandoc/data_json.html" class="sidebar-link">json数据源</a></li><li><a href="/lubandoc/data_xml.html" class="sidebar-link">xml数据源</a></li><li><a href="/lubandoc/data_yaml.html" class="sidebar-link">yaml数据源</a></li><li><a href="/lubandoc/l10n.html" class="sidebar-link">本地化</a></li><li><a href="/lubandoc/excel2textdiff.html" class="sidebar-link">Excel2TextDiff工具</a></li><li><a href="/lubandoc/luban_assistant.html" class="sidebar-link">LubanAssistant Excel插件</a></li><li><a href="/lubandoc/changelog.html" class="sidebar-link">更新日志</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="代码与数据生成"><a href="#代码与数据生成" class="header-anchor">#</a> 代码与数据生成</h1> <h2 id="支持的平台、引擎和语言"><a href="#支持的平台、引擎和语言" class="header-anchor">#</a> 支持的平台、引擎和语言</h2> <ul><li>跨平台
<ul><li>Win</li> <li>Mac</li> <li>Linux (包括WSL)</li></ul></li> <li>支持主流的游戏开发语言
<ul><li>c++ (11+)</li> <li>c# (.net framework 4+. dotnet core 3+)</li> <li>java (1.6+)</li> <li>go (1.10+)</li> <li>lua (5.1+)</li> <li>js 和 typescript (3.0+)</li> <li>python (3.0+)</li> <li>erlang (18+)</li> <li>rust (1.5+)</li> <li>其他<strong>protobuf</strong>支持语言</li></ul></li> <li>支持主流的引擎
<ul><li>unity</li> <li>unreal</li> <li>cocos2d-x</li> <li>微信小游戏平台</li> <li>其他家支持js的小游戏平台</li></ul></li> <li>支持主流的热更新方案
<ul><li>xlua</li> <li>tolua</li> <li>slua</li> <li>ILRuntime</li> <li>sluaunreal</li> <li>puerts</li> <li>XIL</li></ul></li> <li>支持主流的开源框架
<ul><li>skynet</li> <li>ET</li> <li>GameFramework</li> <li>xlua-framework</li></ul></li></ul> <h2 id="可以导出哪些数据格式"><a href="#可以导出哪些数据格式" class="header-anchor">#</a> 可以导出哪些数据格式</h2> <ul><li>binary 格式。 格式紧凑，加载高效，但基本不具体可读性。推荐只用于正式发布。</li> <li>json 格式。 可读性佳。支持优雅对齐格式，也支持紧凑格式。 推荐用于服务器端，以及用于客户端开发期。</li> <li><strong>protobuf</strong> 格式。适用于熟悉pb的开发者。</li> <li><strong>msgpack</strong> 格式。</li> <li>lua 格式。 可读性佳。 推荐仅用于客户端脚本语言为lua的情形。</li> <li>xml 格式。</li> <li>erlang格式。 仅用于 erlang语言。</li> <li>yaml格式。</li> <li>其他格式。很容易扩展支持。</li></ul> <p><strong>同一种格式，为不同语言生成的数据是完全相同的</strong>。</p> <p>不同语言支持的格式如下：</p> <table><thead><tr><th>language</th> <th>data type</th></tr></thead> <tbody><tr><td>c#</td> <td>binary, json</td></tr> <tr><td>java</td> <td>binary, json</td></tr> <tr><td>go</td> <td>binary, json</td></tr> <tr><td>c++</td> <td>binary</td></tr> <tr><td>go</td> <td>binary, json</td></tr> <tr><td>python</td> <td>json</td></tr> <tr><td>typescript</td> <td>binary, json</td></tr> <tr><td>rust</td> <td>json</td></tr> <tr><td>lua</td> <td>binary, lua</td></tr> <tr><td>erlang</td> <td>erlang</td></tr> <tr><td>protobuf</td> <td>所有</td></tr></tbody></table> <h2 id="luban命令行工具的详细文档"><a href="#luban命令行工具的详细文档" class="header-anchor">#</a> luban命令行工具的详细文档？</h2> <p>参见 <a href="https://github.com/focus-creative-games/luban/wiki/Luan.Client%E3%80%81Luban.Server%E5%8F%8ALuban.ClientServer%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%BB%8B%E7%BB%8D" target="_blank" rel="noopener noreferrer">luban命令行<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="如何生成代码和数据"><a href="#如何生成代码和数据" class="header-anchor">#</a> 如何生成代码和数据</h2> <p>详细文档参见上面的链接。代码生成相关的工具有三个,都在luban_examples/Tools目录下。</p> <ul><li>Luban.Client。 Luban工具客户端</li> <li>Luban.Server。 Luban工具服务器端</li> <li>Luban.ClientServer。 Luban工具前后端一体。</li></ul> <p>对于新手简单起见，我们介绍Luban.ClientServer的用法，命令如下：</p> <div class="language-bat line-numbers-mode"><pre class="language-text"><code>dotnet %LUBAN_CLIENT_SERVER_DLL% -j cfg -- ^
 -d %ROOT_FILE% ^
 --input_data_dir %INPUT_DATA_DIR% ^
 --output_code_dir %OUTPUT_CODE_DIR%
 --output_data_dir %OUTPUT_DIR% ^
 --gen_types %GEN_TYPE% ^
 -s %GROUP%
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>其中：</p> <ul><li>LUBAN_CLIENT_SERVER_DLL为 Luban.ClientServer.dll的路径， 可以指向 luban_examples/Tools/Luban.ClientServer/Luban.ClientServer.dll</li> <li>ROOT_FILE 为根定义文件，指向 MyConfigs/Define/__root__.xml</li> <li>INPUT_DATA_DIR 为配置数据的根目录，指向 MyConfigs/Datas</li> <li>OUTPUT_CODE_DIR 为生成代码的目录</li> <li>GEN_TYPE 为生成类型。 如果你使用unity,想生成c#代码，导出json数据，则使用 &quot;code_cs_unity_json,data_json&quot;</li> <li>GROUP 为导出分组。客户端则取client，服务器取server，所有则取all</li></ul> <p>更多项目类型，参见 <a href="https://github.com/focus-creative-games/luban_examples/tree/main/Projects" target="_blank" rel="noopener noreferrer">示例项目<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="为unity项目生成c-代码并导出json数据"><a href="#为unity项目生成c-代码并导出json数据" class="header-anchor">#</a> 为unity项目生成c#代码并导出json数据</h2> <p>对于命令行的介绍参见 上面。 你的生成命令大略如下</p> <div class="language-bat line-numbers-mode"><pre class="language-text"><code>dotnet %LUBAN_CLIENT_SERVER_DLL% -j cfg -- ^
 -d %ROOT_FILE% ^
 --input_data_dir %INPUT_DATA_DIR% ^
 --output_code_dir %OUTPUT_CODE_DIR%
 --output_data_dir %OUTPUT_DIR% ^
 --gen_types &quot;code_cs_unity_json,data_json&quot; ^
 -s client
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>也即 --gen_types参数取 &quot;code_cs_unity_json,data_json&quot;, -s 参数取 client</p> <p>具体项目，可参见 <a href="https://github.com/focus-creative-games/luban_examples/tree/main/Projects/Csharp_Unity_json" target="_blank" rel="noopener noreferrer">Csharp_Unity_Json<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>更多项目类型，参见 <a href="https://github.com/focus-creative-games/luban_examples/tree/main/Projects" target="_blank" rel="noopener noreferrer">示例项目<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="为-unity-puerts-项目生成-ts代码-并生成json数据"><a href="#为-unity-puerts-项目生成-ts代码-并生成json数据" class="header-anchor">#</a> 为 unity + puerts 项目生成 ts代码，并生成json数据</h2> <p>--gen_types 参数取 &quot;code_typescript_json,data_json&quot;，-s 参数取 client</p> <p>具体项目，可参见 <a href="https://github.com/focus-creative-games/luban_examples/tree/main/Projects/TypeScript_Unity_Puerts_Json" target="_blank" rel="noopener noreferrer">Typescript_Unity_Puerts_Json<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="为-ue4项目-生成c-代码-非蓝图-和binary数据"><a href="#为-ue4项目-生成c-代码-非蓝图-和binary数据" class="header-anchor">#</a> 为 UE4项目，生成c++代码（非蓝图）和binary数据</h2> <p>基准的参考项目为 <a href="https://github.com/focus-creative-games/luban_examples/tree/main/Projects/Cpp_Unreal_bin" target="_blank" rel="noopener noreferrer">Cpp_Unreal_bin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>由于生成的代码依赖于一些头文件，你需要先从该项目 拷备Source\Cpp_Unreal\Private\bright 到你们项目合适的位置。必须保证bright目录在include目录路径内，如生成的代码中 #include &quot;bright/serialization/ByteBuf.h&quot; 可以找到这个文件。</p> <p>接着命令行参数取 --gen_types &quot;code_cpp_bin,data_bin&quot;</p> <h2 id="为ue4项目-生成c-代码-蓝图-和binary数据"><a href="#为ue4项目-生成c-代码-蓝图-和binary数据" class="header-anchor">#</a> 为UE4项目，生成c++代码（蓝图）和binary数据</h2> <p>基准的参考项目为 <a href="https://github.com/focus-creative-games/luban_examples/tree/main/Projects/Cpp_Unreal_bp_binary" target="_blank" rel="noopener noreferrer">Cpp_Unreal_bp_bin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>接着命令行参数取 --gen_types &quot;code_cpp_ue_bp_bin,data_bin&quot;</p> <h2 id="为ue4项目-生成c-代码-蓝图-和json数据"><a href="#为ue4项目-生成c-代码-蓝图-和json数据" class="header-anchor">#</a> 为UE4项目，生成c++代码（蓝图）和json数据</h2> <p>基准的参考项目为 <a href="https://github.com/focus-creative-games/luban_examples/tree/main/Projects/Cpp_Unreal_bp_json" target="_blank" rel="noopener noreferrer">Cpp_Unreal_bp_json<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>接着命令行参数取 --gen_types &quot;code_cpp_ue_bp_json,data_json&quot;</p> <h2 id="其他类型项目类型-如何生成代码和数据"><a href="#其他类型项目类型-如何生成代码和数据" class="header-anchor">#</a> 其他类型项目类型，如何生成代码和数据</h2> <p>不同项目之间，仅仅是 --gen_types 不一样， 请从<a href="https://github.com/focus-creative-games/luban_examples/tree/main/Projects" target="_blank" rel="noopener noreferrer">示例项目<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中找到与你项目匹配的项目，参考相应目录下的 gen_code.bat 即可。</p> <h2 id="生成protobuf的定义文件及protobuf数据格式"><a href="#生成protobuf的定义文件及protobuf数据格式" class="header-anchor">#</a> 生成protobuf的定义文件及protobuf数据格式</h2> <p>目前支持proto2和proto3语法</p> <h3 id="protobuf2"><a href="#protobuf2" class="header-anchor">#</a> protobuf2</h3> <p>只支持bin格式导出。</p> <p>取 --gen_types code_protobuf2,data_protobuf_bin 即可，参见 <a href="https://github.com/focus-creative-games/luban_examples/tree/main/Projects/Protobuf2_bin" target="_blank" rel="noopener noreferrer">Protobuf2_bin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。 每个导出的数据文件对应Table类序列化后的内容，加载即可，以item.TbItem表为例。</p> <div class="language-c# line-numbers-mode"><pre class="language-text"><code>var tbItem = ItemTbItem.Parser.ParseFrom(File.OpenRead(&quot;pb_datas/item_tbitem.bytes&quot;));

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="protobuf3"><a href="#protobuf3" class="header-anchor">#</a> protobuf3</h3> <p>既支持bin格式，也支持json格式导出。</p> <ul><li>binary格式导出。 --gen_types code_protobuf3,data_protobuf_bin</li> <li>json格式导出。 --gen_types code_protobuf3,data_protobuf_json</li></ul> <h2 id="生成msgpack的数据"><a href="#生成msgpack的数据" class="header-anchor">#</a> 生成msgpack的数据</h2> <p>取 --gen_types data_msgpack 即可。 参见 <a href="https://github.com/focus-creative-games/luban_examples/tree/main/Projects/MsgPack_bin" target="_blank" rel="noopener noreferrer">MsgPack_bin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="生成flatbuffers的定义文件及flatbuffers数据格式"><a href="#生成flatbuffers的定义文件及flatbuffers数据格式" class="header-anchor">#</a> 生成flatbuffers的定义文件及flatbuffers数据格式</h2> <p>取 --gen_types code_flatbuffers,data_flatbuffers_json 即可，参见 <a href="https://github.com/focus-creative-games/luban_examples/tree/main/Projects/Flatbuffers_json" target="_blank" rel="noopener noreferrer">Flatbuffers_json<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>由于binary格式过于复杂，现在只支持导出json格式，但是使用者可以使用flatc工具将数据转成binary！特地生成了 convert_json_2_binary.bat
和convert_json_2_binary.sh这两个批处理文件，方便自动一键转换。</p> <p>目前由于flat_buffers不支持容器的元素类型为union，因此略微有一些兼容性问题，但在项目中可以通过使用一个bean来包含这个union字段来迂回解决。</p> <p>data_flatbuffers_json 和 data_json的输出格式有一些区别</p> <ul><li>data_flatbuffers_json 顶层为 包含data_list字段的 table,而 data_json顶层直接对应 data_list的内容</li> <li>flatbuffers不支持本地化。 所以它的text类型导出格式为string，而data_json为 {&quot;key&quot;:&quot;xxx&quot;, &quot;text&quot;:&quot;text}</li> <li>data_flatbuffers_json序列化bean类型字段时，如果遇到多态类型，会多序列化一个string类型的xxx_type字段，用于指示union的类型。也正是如此 data_flatbuffers_json不支持容器中出现union</li> <li>data_flatbuffers_json 输出的数据中，如果包含容器类型数据，并且元素类型为union，则无法被正确解析。</li></ul> <h2 id="只生成代码或者数据吗"><a href="#只生成代码或者数据吗" class="header-anchor">#</a> 只生成代码或者数据吗</h2> <p>以 <a href="https://github.com/focus-creative-games/luban_examples/tree/main/Projects/Csharp_Unity_json" target="_blank" rel="noopener noreferrer">Csharp_Unity_Json<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 为例。</p> <ul><li>--gen_types code_cs_unity_json 则只生成代码</li> <li>--gen_types data_json 则只生成数据</li></ul> <h2 id="配置中有些string字段是资源地址-统一导出这些资源地址"><a href="#配置中有些string字段是资源地址-统一导出这些资源地址" class="header-anchor">#</a> 配置中有些string字段是资源地址，统一导出这些资源地址</h2> <p>首先定义类型时，添加上'#res=xxx' 这种标签，xxx可以取任意值。如下所示。</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>TestRes<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>var</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>string#res=item<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>取 '--gen_types data_resources'，并且新增参数'--output:data:resource_list_file resources.txt'。 运行即可将所有带res标签的数据导出到resources.text文件中。</p> <p>假设配置表中包含icon=&quot;/ui/icon1.jpg&quot; 和 icon=&quot;/ui/icon1/jpg&quot; 这两个数据，则导出的资源列表内容为</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>item,/ui/icon1.jpg
item,/ui/icon2.jpg
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>参见示例 <a href="https://github.com/focus-creative-games/luban_examples/tree/main/Projects/GenerateDatas" target="_blank" rel="noopener noreferrer">GenerateDatas<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>/gen_resource_list.bat 文件。</p> <h2 id="生成的c-代码中-vector的类型由system-numerics-vector-2-3-4-改成-unityengine-vector-2-3-4"><a href="#生成的c-代码中-vector的类型由system-numerics-vector-2-3-4-改成-unityengine-vector-2-3-4" class="header-anchor">#</a> 生成的c#代码中,vector的类型由System.Numerics.Vector{2,3,4}，改成 UnityEngine.Vector{2,3,4}</h2> <p>命令行参数中添加  --use_unity_vector 选项即可。 参见示例 <a href="https://github.com/focus-creative-games/luban_examples/tree/main/Projects/Csharp_Unity_bin_use_UnityEngine_Vector" target="_blank" rel="noopener noreferrer">Csharp_Unity_bin_use_UnityEngine_Vector<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="自定义代码命名风格"><a href="#自定义代码命名风格" class="header-anchor">#</a> 自定义代码命名风格</h2> <p>可以。 添加选项 --naming_convention_bean_member none 即可。使生成的代码中的字段名与定义名相同。</p> <p>支持以下代码命名风格：</p> <ul><li>none。 无命名风格，生成的字段名和定义的名称一样</li> <li>language_recommend。即根据生成的语言不同，自动设置该语言推荐的风格。比如c#为PascalCase,java为 camelCase,python为under_scores。</li> <li>camelCalse。 即驼峰形式，生成 xxxYyyy这种风格的字段名。</li> <li>PascalCase。 即Pascal形式。生成XxxYyy这种风格的字段名。</li> <li>under_scores。 下划线形式。即生成xxx_yyy这种风格的字段名。</li></ul> <p>默认使用 language_recommend。</p> <h2 id="gen-types中-code-cs-json和code-cs-unity-json-有什么区别"><a href="#gen-types中-code-cs-json和code-cs-unity-json-有什么区别" class="header-anchor">#</a> gen_types中 code_cs_json和code_cs_unity_json 有什么区别</h2> <p>code_cs_json生成代码中使用了 System.Text.Json库，这个只有.net core 3以后的版本才有，unity目前的.net版本不支持，所以这是给基于.net coer的服务器项目使用的。
code_cs_unity_json使用了第三方的SimpleJson库，兼容unity的.net版本，给unity生成加载json数据的c#代码时，可以（当前也只有这个选择）选择这个。</p> <h2 id="命令行参数中的-j-cfg-的含义"><a href="#命令行参数中的-j-cfg-的含义" class="header-anchor">#</a> 命令行参数中的 -j cfg 的含义</h2> <p>-j选项相应的长选项名为--job，表示生成类型。由于luban目前支持消息(proto)、数据库(db)、配置(cfg) 三种类型的生成任务，这些生成任务的功能完全不同，参数
相差较大，需要用-j 来区分不同的生成任务。</p> <h2 id="生成的配置代码顶层命名空间是cfg-可以不加这个命名空间或者使用其他值吗"><a href="#生成的配置代码顶层命名空间是cfg-可以不加这个命名空间或者使用其他值吗" class="header-anchor">#</a> 生成的配置代码顶层命名空间是cfg，可以不加这个命名空间或者使用其他值吗？</h2> <p>可以。 __root__.xml中 topmodule 配置项对应的值即为顶层命名空间，可以调整为空或者为其他值。</p> <h2 id="生成的数据文件的后缀"><a href="#生成的数据文件的后缀" class="header-anchor">#</a> 生成的数据文件的后缀</h2> <p>数据格式的默认文件后缀如下</p> <table><thead><tr><th>data</th> <th>extension</th></tr></thead> <tbody><tr><td>data_bin</td> <td>bin</td></tr> <tr><td>data_json</td> <td>json</td></tr> <tr><td>data_json2</td> <td>json</td></tr> <tr><td>data_lua</td> <td>lua</td></tr> <tr><td>data_xml</td> <td>xml</td></tr> <tr><td>data_yaml</td> <td>yml</td></tr> <tr><td>data_protobuf</td> <td>bp</td></tr></tbody></table> <p>可以通过命令行选项&quot;--data_file_extension xxx&quot;手动指定输出文件的后缀。</p> <h2 id="enum、bean-类型代码导出规则"><a href="#enum、bean-类型代码导出规则" class="header-anchor">#</a> enum、bean 类型代码导出规则</h2> <p>并非所有定义的类型都会生成代码，必须满足以下规则之一：</p> <ul><li>被导出的table直接或者间接引用的类型</li> <li>root.xml 的 service的 ref项指定的类型。如下图，即使没有任何表直接或者间接引用到test.DemoEnum和test.DemoBean类型，它们也会在server目标时生成代码。</li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>service</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>server<span class="token punctuation">&quot;</span></span> <span class="token attr-name">managers</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Tables<span class="token punctuation">&quot;</span></span> <span class="token attr-name">group</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>s<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test.DemoEnum<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test.DemoBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>service</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="不同导出格式-性能测试结果"><a href="#不同导出格式-性能测试结果" class="header-anchor">#</a> 不同导出格式 性能测试结果</h2> <p>硬件：</p> <p>Intel(R) Core i7-10700 @ 2.9G 16核</p> <p>32G 内存</p> <p>数据集</p> <p>500个excel表
每个表有1000行比较大的记录
每个表文件大小 132k</p> <p>测试结果：</p> <table><thead><tr><th>格式</th> <th>首次耗时</th> <th>累积耗时</th> <th>单个输出文件大小</th> <th>输出文件总大小</th></tr></thead> <tbody><tr><td>bin</td> <td>15.652 s</td> <td>797 ms</td> <td>164 K</td> <td>59.5 M</td></tr> <tr><td>json</td> <td>17.746 s</td> <td>796 ms</td> <td>1.11 M</td> <td>555 M</td></tr> <tr><td>lua</td> <td>17.323 s</td> <td>739 ms</td> <td>433 K</td> <td>212 M</td></tr></tbody></table> <h2 id="binary与json格式加载性能对比"><a href="#binary与json格式加载性能对比" class="header-anchor">#</a> binary与json格式加载性能对比？</h2> <p>以luban_examples的DesignerConfigs配置为测试数据，以Projects下的csharp_Unity_bin和csharp_Unity_json项目为测试对比，
加载100遍cfg.Table。</p> <p>binary格式耗时28ms，json格式耗时112ms。</p> <p>加载性能大约为 4:1。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/24/2021, 1:58:44 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/lubandoc/validator.html" class="prev">
        数据校验器
      </a></span> <span class="next"><a href="/lubandoc/load_config_at_runtime.html">
        项目中加载与使用配置
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/lubandoc/assets/js/app.699fa6f6.js" defer></script><script src="/lubandoc/assets/js/2.e9b74d21.js" defer></script><script src="/lubandoc/assets/js/24.32d98dd4.js" defer></script>
  </body>
</html>
