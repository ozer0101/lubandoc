<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Luban使用文档</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/lubandoc/logo.jpg">
    <meta name="description" content="">
    
    <link rel="preload" href="/lubandoc/assets/css/0.styles.8c5bd95f.css" as="style"><link rel="preload" href="/lubandoc/assets/js/app.c6935655.js" as="script"><link rel="preload" href="/lubandoc/assets/js/2.e9b74d21.js" as="script"><link rel="preload" href="/lubandoc/assets/js/36.16cc10fd.js" as="script"><link rel="prefetch" href="/lubandoc/assets/js/10.584f246b.js"><link rel="prefetch" href="/lubandoc/assets/js/11.f1f69978.js"><link rel="prefetch" href="/lubandoc/assets/js/12.adb99b0d.js"><link rel="prefetch" href="/lubandoc/assets/js/13.e6daf6ae.js"><link rel="prefetch" href="/lubandoc/assets/js/14.a569df65.js"><link rel="prefetch" href="/lubandoc/assets/js/15.4db63b3b.js"><link rel="prefetch" href="/lubandoc/assets/js/16.a99f9bba.js"><link rel="prefetch" href="/lubandoc/assets/js/17.038c894b.js"><link rel="prefetch" href="/lubandoc/assets/js/18.762a5722.js"><link rel="prefetch" href="/lubandoc/assets/js/19.b7ed17c8.js"><link rel="prefetch" href="/lubandoc/assets/js/20.5b818fcf.js"><link rel="prefetch" href="/lubandoc/assets/js/21.3e671057.js"><link rel="prefetch" href="/lubandoc/assets/js/22.9142f783.js"><link rel="prefetch" href="/lubandoc/assets/js/23.fb2e74b3.js"><link rel="prefetch" href="/lubandoc/assets/js/24.444ce891.js"><link rel="prefetch" href="/lubandoc/assets/js/25.2b048cbf.js"><link rel="prefetch" href="/lubandoc/assets/js/26.a24c15d7.js"><link rel="prefetch" href="/lubandoc/assets/js/27.a6b6e5da.js"><link rel="prefetch" href="/lubandoc/assets/js/28.6d3a828c.js"><link rel="prefetch" href="/lubandoc/assets/js/29.fdc53c33.js"><link rel="prefetch" href="/lubandoc/assets/js/3.a9b5ffbb.js"><link rel="prefetch" href="/lubandoc/assets/js/30.9bc5bfd5.js"><link rel="prefetch" href="/lubandoc/assets/js/31.64020cb8.js"><link rel="prefetch" href="/lubandoc/assets/js/32.facbebf2.js"><link rel="prefetch" href="/lubandoc/assets/js/33.0f7ab35b.js"><link rel="prefetch" href="/lubandoc/assets/js/34.c3d71889.js"><link rel="prefetch" href="/lubandoc/assets/js/35.3c9a73df.js"><link rel="prefetch" href="/lubandoc/assets/js/37.8787b4af.js"><link rel="prefetch" href="/lubandoc/assets/js/4.afc2c684.js"><link rel="prefetch" href="/lubandoc/assets/js/5.e7d128b2.js"><link rel="prefetch" href="/lubandoc/assets/js/6.3f529888.js"><link rel="prefetch" href="/lubandoc/assets/js/7.9b79da85.js"><link rel="prefetch" href="/lubandoc/assets/js/8.75d33c25.js"><link rel="prefetch" href="/lubandoc/assets/js/9.4e6e1cec.js">
    <link rel="stylesheet" href="/lubandoc/assets/css/0.styles.8c5bd95f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/lubandoc/" class="home-link router-link-active"><!----> <span class="site-name">Luban使用文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/focus-creative-games/luban" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/focus-creative-games/luban" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/lubandoc/Home.html" class="sidebar-link">Home</a></li><li><a href="/lubandoc/start_up.html" class="sidebar-link">快速上手</a></li><li><a href="/lubandoc/best_practices.html" class="sidebar-link">最佳实践</a></li><li><a href="/lubandoc/feature.html" class="sidebar-link">完整特性</a></li><li><a href="/lubandoc/FAQ.html" class="sidebar-link">FAQ</a></li><li><a href="/lubandoc/command_tools.html" class="sidebar-link">luban命令行工具</a></li><li><a href="/lubandoc/editor.html" class="sidebar-link">Editor支持</a></li><li><a href="/lubandoc/define.html" class="sidebar-link">配置定义</a></li><li><a href="/lubandoc/excel.html" class="sidebar-link">excel格式介绍</a></li><li><a href="/lubandoc/excel_sep.html" class="sidebar-link">excel sep使用介绍</a></li><li><a href="/lubandoc/validator.html" class="sidebar-link">数据校验器</a></li><li><a href="/lubandoc/generate_code_data.html" class="sidebar-link">代码与数据生成</a></li><li><a href="/lubandoc/load_config_at_runtime.html" class="sidebar-link">项目中加载与使用配置</a></li><li><a href="/lubandoc/template.html" class="sidebar-link">自定义代码与数据模板</a></li><li><a href="/lubandoc/tag.html" class="sidebar-link">记录tag与过滤导出</a></li><li><a href="/lubandoc/data_json.html" class="sidebar-link">json数据源</a></li><li><a href="/lubandoc/data_xml.html" class="sidebar-link">xml数据源</a></li><li><a href="/lubandoc/data_yaml.html" class="sidebar-link">yaml数据源</a></li><li><a href="/lubandoc/l10n.html" class="sidebar-link">本地化</a></li><li><a href="/lubandoc/excel2textdiff.html" class="sidebar-link">Excel2TextDiff工具</a></li><li><a href="/lubandoc/luban_assistant.html" class="sidebar-link">LubanAssistant Excel插件</a></li><li><a href="/lubandoc/changelog.html" class="sidebar-link">更新日志</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="特性"><a href="#特性" class="header-anchor">#</a> 特性</h1> <h2 id="完备的类型系统"><a href="#完备的类型系统" class="header-anchor">#</a> 完备的类型系统</h2> <ul><li>基础内置类型
<ul><li>bool,byte,short,fshort,int,fint,long,flong,float,double,string,text,bytes</li> <li>vector2, vector3,vector4</li> <li>datetime</li></ul></li> <li>可空类型
<ul><li>bool?,byte?,short?,fshort?,int?,fint?,long?,flong?,float?,double?</li> <li>vector2?,vector3?,vector4?</li> <li>datetime?</li> <li>&lt;枚举&gt;?</li> <li>&lt; bean&gt;?</li> <li>&lt;多态bean&gt;?</li></ul></li> <li>自定义枚举 enum 及相应可空类型</li> <li>自定义常量 const</li> <li>自定义结构 bean</li> <li>多态bean</li></ul> <p>支持定义无限层次的OOP类型继承体系(比如父类Shape，子类Circle,Rectangle)，在表达复杂配置时极为简洁，对程序和策划都比较友好。</p> <ul><li>支持容器类型 array。 value 可以为内置类型，也可以为自定义类型</li> <li>支持容器类型 list。 value 可以为内置类型，也可以为自定义类型</li> <li>支持容器类型 set。 value 只能为内置类型或者enum类型，不支持 bean 类型</li> <li>支持容器类型 map。 key 只能为内置类型或者enum类型，不支持 bean 类型。 value 可以为内置类型，也可以为自定义类型</li></ul> <h2 id="支持增强的excel格式"><a href="#支持增强的excel格式" class="header-anchor">#</a> 支持增强的excel格式</h2> <ul><li>用 true,false表示 bool变量。</li> <li>用枚举名及别名表示枚举常量。比如用 白绿红之类表示品质，而不是1,2,3这样的magic number</li> <li>支持整数的常量替换。比如说 升级丹道具id 为 1122，所有填升级丹id的地方可以填 升级丹 来表示。减少填写错误</li> <li>支持可空变量. 用 null 表示空数据.</li> <li>支持 datetime 数据类型. 时间格式标准为以下几种，最终被转化为utc时间方便程序处理
<ul><li>yyyy-MM-dd HH:mm:ss</li> <li>yyyy-MM-dd HH:mm</li> <li>yyyy-MM-dd HH</li> <li>yyyy-MM-dd</li></ul></li> <li>支持用sep拆分单元格。在一个单元格里填写多个数据。</li> <li>支持多行数据。例如，章节配置里有一个复杂小节列表字段。支持多行填写这个列表数据。</li> <li>支持多级标题头,方便对应一些比较深的数据。比如  a.b.c 这种。</li> <li>支持多态别名，可以方便填写多态数据。比如说 Circle,5 或者 Rectangle,3,4</li> <li><strong>支持在excel里比较简洁填写出任意复杂的配置</strong>。
<ul><li>支持结构列表。 比如 list,Equip (包含 int id, string name, float attr) 这样一个复杂结构列表数据，可以填成  1,abasfa,0.5|2,xxxyy;0.9。</li> <li>支持多态结构。 比如 cfg.Shape 是一个多态类型,包含 Cirecle(float radius)和Rectagnle(float width, float size)。 可以填成 圆,5 或者 长方形,3,5。</li> <li>支持无限层次的复杂结构的组合
<ul><li>比如 list,Convex(int id, Vector3[] vertexs) 是一个多边形列表, Convext自身包含一个顶点列表，可以配置成 1_1.2,2.3,3.4_3.1,3.2,3.3|2_2.2,2.3.3.3 。</li> <li>比如 list,Shape 是一个形状列表。 可以这样配置  Circle,10;Rectange,5,6;Circle,4</li></ul></li></ul></li></ul> <h2 id="多种原始文件格式支持"><a href="#多种原始文件格式支持" class="header-anchor">#</a> 多种原始文件格式支持</h2> <p>一个复杂项目中，总有一部分数据(10-20%)不适合excel编辑（比如技能、AI、副本等等），这些数据一般通过专用编辑器来编辑和导出。遇到的问题是这种配置数据是无法与excel数据统一处理的，造成游戏内有多种配置数据加载方案，程序需要花费很多时间去处理这些数据的加载问题。另外这些复杂数据无法使用数据检验和分组导出以及本地化等等excel导表工具的机制。Luban能够处理excel族、xml、json、lua、目录等多种数据源，统一导出数据和生成代码，所有数据源都能使用数据检验、分组导出等等机制，程序彻底从复杂配置处理中解脱出来。</p> <ul><li>支持excel族文件。 csv 及 xls,xlsx等格式</li> <li>支持从指定excel里的某个单元薄读入。</li> <li>支持json。 每个json文件当作一个记录读入</li> <li>支持lua。 每个lua文件当作一个记录读入</li> <li>支持xml。 每个xml文件当作一个记录读入</li> <li>支持目录。 递归目录下的所有文件，每个文件当作一个记录读入。允许不同类型的文件混合，比如目录下可以同时有json,lua,xml,excel之类的格式。</li> <li>每个表允许指定多个数据源，可以使用以上所有的组合。
<ul><li>多对一。比如可以在一个excel里用不同页签配置不同的表。比如 装备升级表和进阶表都在 装备表.xlsx中</li> <li>一对多。比如任务表可以来 任务1.xlsx，任务2.xlsx 等等多个表。</li> <li>多对多。还可以是以上组合，不过实际中很少见）</li></ul></li></ul> <h2 id="多种导出数据格式支持"><a href="#多种导出数据格式支持" class="header-anchor">#</a> 多种导出数据格式支持</h2> <p><strong>导出格式与原始数据解耦</strong>。无论源数据是 excel、lua、xml、json 或者它们的混合, 最终都被以<strong>统一的格式</strong>导出，极大简化了生成代码的复杂性。 目前支持以下几种导出格式：</p> <ul><li>binary格式。与pb格式类似。所占空间最小，加载最快。</li> <li>json 格式。</li> <li>lua 格式。</li> <li>扩展其他格式也很容易。（像前几种数据格式导出只用200行代码）</li></ul> <h2 id="支持表与字段级别分组"><a href="#支持表与字段级别分组" class="header-anchor">#</a> 支持表与字段级别分组</h2> <p>支持自定义分组类型。既支持按分组选择性导出一部分表，也支持选择性导出表中的一部分字段。比如为前后端分别导出他们所用的数据。</p> <h2 id="支持数据标签"><a href="#支持数据标签" class="header-anchor">#</a> 支持数据标签</h2> <p>支持 是、否、test 三种标签。可以为每行数据加标签。比如标签为&quot;否&quot;表示这行数据不被导出。 如果为 &quot;test&quot;，则只在测试导出情况下才导出。比如内部开发时会配置一些测试数据，但对外发布时不希望导出它们的情形。</p> <h2 id="强大的数据校验能力"><a href="#强大的数据校验能力" class="header-anchor">#</a> 强大的数据校验能力</h2> <ul><li>完整的数据内建约束检查</li> <li>ref 检查。检查表引用合法性。比如 Monster表中的dropId必须是合法的 TbDrop表的key.</li> <li>path 检查。检查资源引用合法性。比如 Monster表的icon必须是合法的图标资源。对于防止策划填错极其有用，不再需要运行时才发现资源配置错误了。</li> <li>range 检查。检查数值范围。</li> <li>扩展的自定义检查。使用自定义代码进行高级检查。提交配置前就能完成本地检查，避免运行时才发现错误，极大减少迭代成本。</li></ul> <h2 id="多种数据表模式"><a href="#多种数据表模式" class="header-anchor">#</a> 多种数据表模式</h2> <ul><li>one 格式，即单例表模式</li> <li>map 格式，即普通key-value表模式。 任何符合set 的value要求的类型都可以做key</li></ul> <h2 id="本地化支持"><a href="#本地化支持" class="header-anchor">#</a> 本地化支持</h2> <ul><li>支持<strong>本地化时间</strong>。 配置中的 datetime会根据指定的timezone及localtime转化为正确的utc时间，方便程序处理</li> <li>支持<strong>静态本地化</strong>。 配置中的text类型在导出时已经转化为正确的本地化后的字符串</li> <li>支持<strong>动态本地化</strong>。 配置中的text类型能运行时全部切换为某种本地化后的字符串</li></ul> <h2 id="代码编辑器支持"><a href="#代码编辑器支持" class="header-anchor">#</a> 代码编辑器支持</h2> <p>支持 emmylua anntations。生成的lua包含符合emmylua 格式anntations信息。配合emmylua有良好的配置代码提示能力。</p> <h2 id="资源导出支持"><a href="#资源导出支持" class="header-anchor">#</a> 资源导出支持</h2> <p>支持 res 资源标记。可以一键导出配置中引用的所有资源列表(icon,ui,assetbundle等等)</p> <h2 id="代码模块化"><a href="#代码模块化" class="header-anchor">#</a> 代码模块化</h2> <p>生成模块化的代码。比如</p> <ul><li>c#   cfg.item.ItemInfo</li> <li>c++  cfg::item::ItemInfo</li> <li>lua  item.ItemInfo</li> <li>go   item_ItemInfo</li></ul> <h2 id="生成极快-大型项目也能秒级导出"><a href="#生成极快-大型项目也能秒级导出" class="header-anchor">#</a> 生成极快，大型项目也能秒级导出</h2> <p>使用 client/server模式，利用服务器强大的硬件(大内存+多线程)，同时配合缓存机制（如果数据和定义未修改，直接返回之前生成过的结果），即使到项目中后期数据规模比较大也能1秒（传统在10秒以上）左右生成所有数据并且完成数据校验。考虑策划和程序经常使用生成工具，积少成多，也能节省大量研发时间。</p> <h2 id="数据模块化"><a href="#数据模块化" class="header-anchor">#</a> 数据模块化</h2> <p>策划可以方便地按需求自己组织数据目录和结构，不影响逻辑表。</p> <h2 id="支持主流的游戏开发语言"><a href="#支持主流的游戏开发语言" class="header-anchor">#</a> 支持主流的游戏开发语言</h2> <ul><li>c++ (11+)</li> <li>c# (.net framework 2+. dotnet core 2+)</li> <li>java (1.6+)</li> <li>go (1.10+)</li> <li>lua (5.1+)</li> <li>js 和 typescript (3.0+)</li> <li>python (2.7+ 及 3.0+)</li></ul> <h2 id="支持主流引擎和平台"><a href="#支持主流引擎和平台" class="header-anchor">#</a> 支持主流引擎和平台</h2> <ul><li>unity + c#</li> <li>unity + tolua,xlua</li> <li>unity + ILRuntime</li> <li>unreal + c++</li> <li>unreal + unlua</li> <li>unreal + sluaunreal</li> <li>unreal + puerts</li> <li>cocos2d-x + lua</li> <li>cocos2d-x + js</li> <li>微信小程序平台</li> <li>其他家基于js的小程序平台</li> <li>其他所有支持lua的引擎和平台</li> <li>其他所有支持js的引擎和平台</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/20/2021, 6:14:18 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/lubandoc/assets/js/app.c6935655.js" defer></script><script src="/lubandoc/assets/js/2.e9b74d21.js" defer></script><script src="/lubandoc/assets/js/36.16cc10fd.js" defer></script>
  </body>
</html>
