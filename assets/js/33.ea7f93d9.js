(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{436:function(t,e,a){"use strict";a.r(e);var s=a(54),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"快速上手"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#快速上手"}},[t._v("#")]),t._v(" 快速上手")]),t._v(" "),a("h2",{attrs:{id:"视频教程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#视频教程"}},[t._v("#")]),t._v(" 视频教程")]),t._v(" "),a("p",[t._v("== "),a("strong",[t._v("感谢 "),a("a",{attrs:{href:"https://space.bilibili.com/1916310",target:"_blank",rel:"noopener noreferrer"}},[a("strong",[t._v("宝鱼偷偷摸鱼")]),a("OutboundLink")],1),t._v(" 的贡献")]),t._v(" ==")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.bilibili.com/video/BV1xS4y1M7Aj",target:"_blank",rel:"noopener noreferrer"}},[a("strong",[t._v("【01】新手上路")]),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.bilibili.com/video/BV1m44y1j747",target:"_blank",rel:"noopener noreferrer"}},[a("strong",[t._v("【02】定义配置结构")]),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),a("ol",[a("li",[a("p",[a("a",{attrs:{href:"https://dotnet.microsoft.com/download/dotnet/6.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("dotnet sdk 6.0"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[t._v("下载luban_examples项目")]),t._v(" "),a("p",[t._v("下载项目 "),a("a",{attrs:{href:"https://github.com/focus-creative-games/luban_examples",target:"_blank",rel:"noopener noreferrer"}},[t._v("luban_examples"),a("OutboundLink")],1),t._v("。\n项目中包含测试配置、最新的luban_client&luban_server工作以及大量的示例项目。为方便起见，后续提及到的文件，默认都指这个项目中的文件。")])])]),t._v(" "),a("h2",{attrs:{id:"创建游戏配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建游戏配置"}},[t._v("#")]),t._v(" 创建游戏配置")]),t._v(" "),a("h3",{attrs:{id:"准备基础的配置模板"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#准备基础的配置模板"}},[t._v("#")]),t._v(" 准备基础的配置模板")]),t._v(" "),a("p",[t._v("从示例项目拷贝"),a("a",{attrs:{href:"https://github.com/focus-creative-games/luban_examples/tree/main/MiniDesignerConfigsTemplate",target:"_blank",rel:"noopener noreferrer"}},[t._v("MiniDesignerConfigsTemplate"),a("OutboundLink")],1),t._v(" 到一个合适的目录，假设为 "),a("strong",[t._v("MyConfigs")])]),t._v(" "),a("h3",{attrs:{id:"定义一个新的配置表-此步骤可跳过"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#定义一个新的配置表-此步骤可跳过"}},[t._v("#")]),t._v(" 定义一个新的配置表 (== 此步骤可跳过 ==)")]),t._v(" "),a("p",[t._v("基础配置模板里已经包含了一个item.xlsx示例表，可以直接生成。如果你想体验一下如何创建一个新的配置表，\n可以按照下面的步骤操作，否则"),a("strong",[t._v("可以快速直接跳过")]),t._v("。")]),t._v(" "),a("p",[t._v("假设这个新表为reward表。")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("添加excel配置数据文件\n在 MyConfigs/Datas 目录下创建一个 “reward.xlsx” 文件。")]),t._v(" "),a("p",[t._v("文件内容如下")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("##var")]),t._v(" "),a("th",[t._v("id")]),t._v(" "),a("th",[t._v("name")]),t._v(" "),a("th",[t._v("desc")]),t._v(" "),a("th",[t._v("count")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("##type")]),t._v(" "),a("td",[t._v("int")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("int")])]),t._v(" "),a("tr",[a("td",[t._v("##")]),t._v(" "),a("td",[t._v("id")]),t._v(" "),a("td",[t._v("名字")]),t._v(" "),a("td",[t._v("描述")]),t._v(" "),a("td",[t._v("个数")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[t._v("1001")]),t._v(" "),a("td",[t._v("item1")]),t._v(" "),a("td",[t._v("desc1")]),t._v(" "),a("td",[t._v("10")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[t._v("1002")]),t._v(" "),a("td",[t._v("item2")]),t._v(" "),a("td",[t._v("desc2")]),t._v(" "),a("td",[t._v("10")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[t._v("1003")]),t._v(" "),a("td",[t._v("item3")]),t._v(" "),a("td",[t._v("desc3")]),t._v(" "),a("td",[t._v("10")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[t._v("1004")]),t._v(" "),a("td",[t._v("item4")]),t._v(" "),a("td",[t._v("desc4")]),t._v(" "),a("td",[t._v("10")])])])]),t._v(" "),a("ul",[a("li",[t._v("第 1 行是 主字段行，包含表字段定义。单元格 A1 必须以##开头。表示这是一个有效数据表。")]),t._v(" "),a("li",[t._v("第 2 行是类型行，第1个单元格必须为 ##type。")]),t._v(" "),a("li",[t._v("第 3 行是注释行。 以##开头。 可以有0-N个注释行，而且可以出现在任何位置")]),t._v(" "),a("li",[t._v("第 4 行起是数据行。")])]),t._v(" "),a("p",[a("strong",[t._v("像##var或者##type 这种带名字的行，可以随便调整行的位置。")])])]),t._v(" "),a("li",[a("p",[t._v("在 Datas 目录下的__tables__.xlsx添加表声明，如下图：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("##var")]),t._v(" "),a("th",[t._v("full_name")]),t._v(" "),a("th",[t._v("value_type")]),t._v(" "),a("th",[t._v("define_from_file")]),t._v(" "),a("th",[t._v("input")]),t._v(" "),a("th",[t._v("index")]),t._v(" "),a("th",[t._v("mode")]),t._v(" "),a("th",[t._v("group")]),t._v(" "),a("th",[t._v("comment")]),t._v(" "),a("th",[t._v("patch_input")]),t._v(" "),a("th",[t._v("tags")]),t._v(" "),a("th",[t._v("output")])])]),t._v(" "),a("tbody",[a("tr",[a("td"),t._v(" "),a("td",[t._v("demo.TbReward")]),t._v(" "),a("td",[t._v("Reward")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("reward.xlsx")]),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td")])])])]),t._v(" "),a("li",[a("p",[t._v("至此reward表的创建工作大功告成!")])])]),t._v(" "),a("h2",{attrs:{id:"生成代码和数据以及在程序中使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生成代码和数据以及在程序中使用"}},[t._v("#")]),t._v(" 生成代码和数据以及在程序中使用")]),t._v(" "),a("p",[t._v("有几个常见需求， 根据你的要求选择下面合适的文档")]),t._v(" "),a("ul",[a("li",[t._v("unity + c# + json")]),t._v(" "),a("li",[t._v("unity + puerts + json")]),t._v(" "),a("li",[t._v("UE4 + c++ + binary")]),t._v(" "),a("li",[t._v("UE4 + blueprint c++ + binary")]),t._v(" "),a("li",[t._v("UE4 + blueprint c++ + json")]),t._v(" "),a("li",[t._v("只想excel导出json，自己手写代码加载或者有其他使用目的")]),t._v(" "),a("li",[t._v("其他需求")])]),t._v(" "),a("h3",{attrs:{id:"unity-c-json"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#unity-c-json"}},[t._v("#")]),t._v(" unity + c# + json")]),t._v(" "),a("p",[t._v("示例参考项目为 "),a("a",{attrs:{href:"https://github.com/focus-creative-games/luban_examples/tree/main/Projects/Csharp_Unity_json",target:"_blank",rel:"noopener noreferrer"}},[t._v("Csharp_Unity_Json"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("项目准备。")]),t._v(" "),a("p",[t._v("拷贝示例项目中 Assets\\LubanLib 目录到你的Unity项目中（可以自由组织位置），"),a("strong",[t._v("===同时在Unity的PlayerSettings里开启unsafe选项===")]),t._v("（如果你们项目要求不开启unsafe，请群里求助）,此时尝试编译项目，理论上应该能成功编译。")])]),t._v(" "),a("li",[a("p",[t._v("运行生成命令（可以参考示例项目的gen_code_json.bat）")]),t._v(" "),a("div",{staticClass:"language-bat line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('    dotnet %Luban.ClientServer.dll%\n    -j cfg ^\n    -- ^\n    --define_file <__root__.xml 定义文件的路径> ^\n    --input_data_dir <配置数据根目录(Datas)的路径> ^\n    --output_code_dir <生成的代码文件的路径> ^\n    --output_data_dir <导出的数据文件的路径> ^\n    --service all ^\n    --gen_types "code_cs_unity_json,data_json"\n')])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("p",[t._v("其中")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("%Luban.ClientServer.dll% 指向  luban_examples/Tools/Luban.ClientServer/Luban.ClientServer.dll")])]),t._v(" "),a("li",[a("p",[t._v("--define_file  参数为 MyConfigs/Defines/__root__.xml 的路径")])]),t._v(" "),a("li",[a("p",[t._v("--input_data_dir 参数为 MyConfigs/Datas 的路径")])]),t._v(" "),a("li",[a("p",[t._v("--output_code_dir 参数为生成的代码文件存放的路径。 建议建议指向 unity的 Assets 目录下的某级子目录")])]),t._v(" "),a("li",[a("p",[t._v("--output_data_dir 参数为生成的数据文件的存放路径。 建议指向Assets同级目录。")]),t._v(" "),a("p",[t._v("详细的命令文档请看 "),a("RouterLink",{attrs:{to:"/luban.wiki/command_tools.html"}},[t._v("command_tools")]),t._v("。")],1),t._v(" "),a("p",[t._v("如果一切正常，会产生一系列日志，最终一行是 == succ == 。")]),t._v(" "),a("p",[t._v("类似这样")]),t._v(" "),a("p",[a("img",{attrs:{src:"images/install/install_07.png",alt:"生成结果"}})]),t._v(" "),a("p",[t._v("如果一切顺利。生成的代码文件会在 –output_code_dir 参数指定的 目录中，生成的配置数据会在 –output_data_dir 参数指定的目录中。确保 –output_code_dir 指向的目录在Assets目录下，"),a("strong",[t._v("PlayerSetting里开启unsafe")]),t._v("，此时应该能编译成功。")])])])]),t._v(" "),a("li",[a("p",[t._v("加载配置")]),t._v(" "),a("p",[t._v("只需一行代码既可完成所有配置表的加载工具")]),t._v(" "),a("div",{staticClass:"language-c# line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('var tables = new cfg.Tables(file => JSON.Parse(File.ReadAllText(gameConfDir + "/" + file + ".json")));\n')])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])])]),t._v(" "),a("li",[a("p",[t._v("使用加载后的配置表")]),t._v(" "),a("p",[t._v("cfg.Tables 里包含所有配置表的一个实例字段。加载完 cfg.Tables 后，只需要用 tables.<表名> 就能获得那个表实例，接着可以做各种操作。例如我们要获取id = 10000 的那个道具。代码如下")]),t._v(" "),a("div",{staticClass:"language-c# line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('cfg.item.Item itemInfo = tables.TbItem.Get(10000);\nConsole.WriteLine("id:{0} name:{1} desc:{2}", itemInfo.Id, itemInfo.Name, itemInfo.Desc);\n')])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("可能你会注意到，item.xml 里定义 Item 时，字段名 id,name,desc的首字母被大写了。这是因为工具会根据输出的语言，自动作相应代码风格的字段名转换，也即 boo_bar 会被转换为 BooBar 这样的名字。这也是为什么推荐 配置字段定义时统一使用 xx_yy_zz 的风格。")])]),t._v(" "),a("li",[a("p",[t._v("至此完成 配置加载与使用!")])])]),t._v(" "),a("h2",{attrs:{id:"unity-puerts-项目生成-ts代码-并生成json数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#unity-puerts-项目生成-ts代码-并生成json数据"}},[t._v("#")]),t._v(" unity + puerts 项目生成 ts代码，并生成json数据")]),t._v(" "),a("p",[t._v("参考项目为 "),a("a",{attrs:{href:"https://github.com/focus-creative-games/luban_examples/tree/main/Projects/TypeScript_Unity_Puerts_Json",target:"_blank",rel:"noopener noreferrer"}},[t._v("TypeScript_Unity_Puerts_Json"),a("OutboundLink")],1)]),t._v(" "),a("ul",[a("li",[a("p",[t._v("创建并且运行生成命令（可以参考示例项目的gen_code_json.bat）")]),t._v(" "),a("div",{staticClass:"language-bat line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("dotnet %Luban.ClientServer.dll%\n-j cfg ^\n-- ^\n--define_file <__root__.xml 定义文件的路径> ^\n--input_data_dir <配置数据根目录(Datas)的路径> ^\n--output_code_dir <生成的代码文件的路径> ^\n--output_data_dir <导出的数据文件的路径> ^\n--service all ^\n--gen_types code_typescript_json,data_json ^\n--typescript:use_puerts_bytebuf ^\n--typescript:embed_bright_types \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br")])]),a("p",[t._v("其中")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("%Luban.ClientServer.dll% 指向  luban_examples/Tools/Luban.ClientServer/Luban.ClientServer.dll")])]),t._v(" "),a("li",[a("p",[t._v("--define_file  参数为 MyConfigs/Defines/__root__.xml 的路径")])]),t._v(" "),a("li",[a("p",[t._v("--input_data_dir 参数为 MyConfigs/Datas 的路径")])]),t._v(" "),a("li",[a("p",[t._v("--output_code_dir 参数为生成的代码文件存放的路径。 建议建议指向 unity的 Assets 目录下的某级子目录")])]),t._v(" "),a("li",[a("p",[t._v("--output_data_dir 参数为生成的数据文件的存放路径。 建议指向Assets同级目录。")]),t._v(" "),a("p",[t._v("详细的命令文档请看 "),a("RouterLink",{attrs:{to:"/luban.wiki/command_tools.html"}},[t._v("command_tools")]),t._v("。")],1),t._v(" "),a("p",[t._v("如果一切正常，会产生一系列日志，最终一行是 == succ == 。")])])])]),t._v(" "),a("li",[a("p",[t._v("加载配置")]),t._v(" "),a("p",[t._v("为cfg.Tables提供一个Loader,根据表名返回一个加载好的JSON对象。只需少量代码既可完成所有配置表的加载工具。")]),t._v(" "),a("div",{staticClass:"language-typescript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" tables "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("cfg")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Tables")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("f "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" JsHelpers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ReadAllText")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("UnityEngine"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Application"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dataPath "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"GameData/"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" f "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('".json"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])])]),t._v(" "),a("li",[a("p",[t._v("使用加载后的配置表")]),t._v(" "),a("p",[t._v("cfg.Tables 里包含所有配置表的一个实例字段。加载完 cfg.Tables 后，只需要用 tables.<表名> 就能获得那个表实例，接着可以做各种操作。例如我们要获取id = 10000 的那个道具。代码如下")]),t._v(" "),a("div",{staticClass:"language-typescript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tables"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("TbGlobalConfig"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bagCapacity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tables"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("TbItem"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])])]),t._v(" "),a("li",[a("p",[t._v("至此完成 配置加载与使用!")])])]),t._v(" "),a("h2",{attrs:{id:"我是ue4项目-想生成c-代码-非蓝图-和binary数据该怎么做"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#我是ue4项目-想生成c-代码-非蓝图-和binary数据该怎么做"}},[t._v("#")]),t._v(" 我是UE4项目，想生成c++代码（非蓝图）和binary数据该怎么做")]),t._v(" "),a("p",[t._v("基准的参考项目为 "),a("a",{attrs:{href:"https://github.com/focus-creative-games/luban_examples/tree/main/Projects/Cpp_Unreal_bin",target:"_blank",rel:"noopener noreferrer"}},[t._v("Cpp_Unreal_bin"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("p",[t._v('由于生成的代码依赖于一些头文件，你需要先从该项目 拷备Source\\Cpp_Unreal\\Private\\bright 到你们项目合适的位置。必须保证bright目录在include目录路径内，如生成的代码中 #include "bright/serialization/ByteBuf.h" 可以找到这个文件。')]),t._v(" "),a("p",[t._v('接着命令行参数取 --gen_types "code_cpp_bin,data_bin"')]),t._v(" "),a("h2",{attrs:{id:"我是ue4项目-想生成c-代码-蓝图-和binary数据该怎么做"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#我是ue4项目-想生成c-代码-蓝图-和binary数据该怎么做"}},[t._v("#")]),t._v(" 我是UE4项目，想生成c++代码（蓝图）和binary数据该怎么做")]),t._v(" "),a("p",[t._v("基准的参考项目为 "),a("a",{attrs:{href:"https://github.com/focus-creative-games/luban_examples/tree/main/Projects/Cpp_Unreal_bp_binary",target:"_blank",rel:"noopener noreferrer"}},[t._v("Cpp_Unreal_bp_bin"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("p",[t._v('接着命令行参数取 --gen_types "code_cpp_ue_bp_bin,data_bin"')]),t._v(" "),a("h2",{attrs:{id:"我是ue4项目-想生成c-代码-蓝图-和json数据该怎么做"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#我是ue4项目-想生成c-代码-蓝图-和json数据该怎么做"}},[t._v("#")]),t._v(" 我是UE4项目，想生成c++代码（蓝图）和json数据该怎么做")]),t._v(" "),a("p",[t._v("基准的参考项目为 "),a("a",{attrs:{href:"https://github.com/focus-creative-games/luban_examples/tree/main/Projects/Cpp_Unreal_bp_json",target:"_blank",rel:"noopener noreferrer"}},[t._v("Cpp_Unreal_bp_json"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("p",[t._v('接着命令行参数取 --gen_types "code_cpp_ue_bp_json,data_json"')]),t._v(" "),a("h3",{attrs:{id:"只想根据excel导出json数据-自己手写代码加载使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#只想根据excel导出json数据-自己手写代码加载使用"}},[t._v("#")]),t._v(" 只想根据excel导出json数据，自己手写代码加载使用")]),t._v(" "),a("p",[t._v("示例为 "),a("a",{attrs:{href:"https://github.com/focus-creative-games/luban_examples/tree/main/Projects/Csharp_Unity_json",target:"_blank",rel:"noopener noreferrer"}},[t._v("GenerateDatas项目"),a("OutboundLink")],1),t._v(" 下的 gen_data_json2.bat\n（注意不是gen_data_json.bat,因为gen_data_json.bat中'--gen_types data_json',生成的json数据为记录列表，而不是以key-value形式组织，可能并不符合你的要求）。")]),t._v(" "),a("p",[t._v("脚本如下：")]),t._v(" "),a("div",{staticClass:"language-bat line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("dotnet %Luban.ClientServer.dll%\n -j cfg ^\n -- ^\n --define_file <__root__.xml 定义文件的路径> ^\n --input_data_dir <配置数据根目录(Datas)的路径> ^\n --output_data_dir <导出的数据文件的路径> ^\n --service all ^\n --gen_types data_json2\n\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("p",[t._v("其中")]),t._v(" "),a("ul",[a("li",[t._v("%Luban.ClientServer.dll% 指向  luban_examples/Tools/Luban.ClientServer/Luban.ClientServer.dll")]),t._v(" "),a("li",[t._v("--define_file  参数为 MyConfigs/Defines/__root__.xml 的路径")]),t._v(" "),a("li",[t._v("--input_data_dir 参数为 MyConfigs/Datas 的路径")]),t._v(" "),a("li",[t._v("--output_data_dir 参数为生成的数据文件的存放路径。 建议指向Assets同级目录。")])]),t._v(" "),a("p",[t._v("此时运行脚本。应该能执行成功。生成的数据在 --output_data_dir 参数指定的目录下")]),t._v(" "),a("h2",{attrs:{id:"其他项目类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他项目类型"}},[t._v("#")]),t._v(" 其他项目类型")]),t._v(" "),a("p",[t._v("不同项目之间，仅仅是准备工作及 --gen_types 不一样， 请从"),a("a",{attrs:{href:"https://github.com/focus-creative-games/luban_examples/tree/main/Projects",target:"_blank",rel:"noopener noreferrer"}},[t._v("示例项目"),a("OutboundLink")],1),t._v("中找到与你项目匹配的项目，参考相应目录下的 gen_xxx.bat 即可。")]),t._v(" "),a("p",[t._v("生成的代码一般会依赖于一些工具类，请从相应项目里拷贝这些代码到自己项目即可。")]),t._v(" "),a("p",[t._v("更多可以参考 "),a("a",{attrs:{href:"generate_code_data"}},[t._v("代码与数据生成")]),t._v(" 这个文档。")])])}),[],!1,null,null,null);e.default=n.exports}}]);